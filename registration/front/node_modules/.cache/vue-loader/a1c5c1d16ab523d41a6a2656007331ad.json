{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\home\\myHome.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\home\\myHome.vue","mtime":1743403543327},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739857230815},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICAgIGdldE15RG9vckxpc3QsDQogICAgc2V0TXlEb29yTGlzdCwNCiAgICB1c2VySW5mb0VkaXQNCn0gZnJvbSAiLi9hcGkuanMiOw0KaW1wb3J0IHVwbG9hZFBpY1RodW1iIGZyb20gIkAvdmlld3MvdGVtcGxhdGUvdXBsb2FkLXBpYy10aHVtYiI7DQppbXBvcnQgQ29va2llcyBmcm9tICJqcy1jb29raWUiOw0KaW1wb3J0IGRpY3QgZnJvbSAiQC92aWV3cy90ZW1wbGF0ZS9kaWN0IjsNCmltcG9ydCBzZWFyY2ggZnJvbSAiLi9zZWFyY2gudnVlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIHVwbG9hZFBpY1RodW1iLA0KICAgICAgICBkaWN0LA0KICAgICAgICBzZWFyY2gNCiAgICB9LA0KICAgIG5hbWU6ICJteV9ob21lX2luZGV4IiwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgZWRpdEZsYWc6IGZhbHNlLA0KICAgICAgICAgICAgdXNlckZvcm06IHsNCiAgICAgICAgICAgICAgICBpZDogIiIsDQogICAgICAgICAgICAgICAgYXZhdGFyOiAiIiwNCiAgICAgICAgICAgICAgICB1c2VybmFtZTogIiIsDQogICAgICAgICAgICAgICAgc2V4OiAiIiwNCiAgICAgICAgICAgICAgICBzdGF0dXM6ICIiLA0KICAgICAgICAgICAgICAgIHR5cGU6ICIiLA0KICAgICAgICAgICAgICAgIHR5cGVUeHQ6ICIiLA0KICAgICAgICAgICAgICAgIGFkZHJlc3M6ICIiLA0KICAgICAgICAgICAgICAgIGFkZHJlc3NBcnJheTogW10NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBzYXZlTG9hZGluZzogZmFsc2UsDQogICAgICAgICAgICBhZGRNZW51VGVtcExpc3Q6IFtdDQogICAgICAgIH07DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGluaXQoKSB7DQogICAgICAgICAgICBsZXQgdiA9IEpTT04ucGFyc2UoQ29va2llcy5nZXQoInVzZXJJbmZvIikpOw0KICAgICAgICAgICAgZm9yIChsZXQgYXR0ciBpbiB2KSB7DQogICAgICAgICAgICAgICAgaWYgKHZbYXR0cl0gPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB2W2F0dHJdID0gIiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOw0KICAgICAgICAgICAgbGV0IHVzZXJJbmZvID0gSlNPTi5wYXJzZShzdHIpOw0KICAgICAgICAgICAgdXNlckluZm8uYWRkcmVzc0FycmF5ID0gW107DQogICAgICAgICAgICB0aGlzLnVzZXJGb3JtID0gdXNlckluZm87DQogICAgICAgICAgICBpZiAodXNlckluZm8uYWRkcmVzcykgew0KICAgICAgICAgICAgICAgIHRoaXMudXNlckZvcm0uYWRkcmVzcyA9IHVzZXJJbmZvLmFkZHJlc3M7DQogICAgICAgICAgICAgICAgdGhpcy51c2VyRm9ybS5hZGRyZXNzQXJyYXkgPSBKU09OLnBhcnNlKHVzZXJJbmZvLmFkZHJlc3MpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMudXNlckZvcm0udHlwZSA9PSAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy51c2VyRm9ybS50eXBlVHh0ID0gIuaZrumAmueUqOaItyI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudXNlckZvcm0udHlwZSA9PSAxKSB7DQogICAgICAgICAgICAgICAgdGhpcy51c2VyRm9ybS50eXBlVHh0ID0gIueuoeeQhuWRmCI7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFkZE1lbnVUZW1wRngoZSkgew0KICAgICAgICAgICAgaWYgKHRoaXMuYWRkTWVudVRlbXBMaXN0Lmxlbmd0aCA+IDUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuacgOWkmua3u+WKoOWFreS4quW4uOeUqOaooeWdlyIpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFkZE1lbnVUZW1wTGlzdC5wdXNoKGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgICAgIGFkZE1lbnVGeCgpIHsNCiAgICAgICAgICAgIHZhciBzdHIgPSAiIjsNCiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5hZGRNZW51VGVtcExpc3QubGVuZ3RoOw0KICAgICAgICAgICAgaWYgKHNpemUgPiAwKSB7DQogICAgICAgICAgICAgICAgc3RyICs9IHRoaXMuYWRkTWVudVRlbXBMaXN0WzBdLm5hbWU7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzaXplOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgc3RyICs9ICJaV1o2NjYiICsgdGhpcy5hZGRNZW51VGVtcExpc3RbaV0ubmFtZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzZXRNeURvb3JMaXN0KHsNCiAgICAgICAgICAgICAgICBzdHI6IHN0cg0KICAgICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5pON5L2c5oiQ5YqfIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIHNhdmVFZGl0KCkgew0KICAgICAgICAgICAgdGhpcy5zYXZlTG9hZGluZyA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmVkaXRGbGFnID0gZmFsc2U7DQogICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMudXNlckZvcm0uYmlydGggPT0gIm9iamVjdCIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnVzZXJGb3JtLmJpcnRoID0gdGhpcy5mb3JtYXQodGhpcy51c2VyRm9ybS5iaXJ0aCwgInl5eXktTU0tZGQiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnVzZXJGb3JtLnJvbGVzOw0KICAgICAgICAgICAgdXNlckluZm9FZGl0KHRoaXMudXNlckZvcm0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnNhdmVMb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5L+d5a2Y5oiQ5YqfIik7DQogICAgICAgICAgICAgICAgICAgIC8vIOabtOaWsOeUqOaIt+S/oeaBrw0KICAgICAgICAgICAgICAgICAgICBDb29raWVzLnNldCgidXNlckluZm8iLCBKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJGb3JtKSk7DQogICAgICAgICAgICAgICAgICAgIC8vIOabtOaWsOWktOWDjw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEF2YXRhclBhdGgiLCB0aGlzLnVzZXJGb3JtLmF2YXRhcik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0TXlEb29yTGlzdEZ4KCkgew0KICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOw0KICAgICAgICAgICAgZ2V0TXlEb29yTGlzdCgpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgIHRoYXQuYWRkTWVudVRlbXBMaXN0ID0gcmVzLnJlc3VsdDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBkZWxldGVPbmVNZW51KGUpIHsNCiAgICAgICAgICAgIHZhciBhcnJheSA9IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFkZE1lbnVUZW1wTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmFkZE1lbnVUZW1wTGlzdFtpXS5uYW1lICE9IGUubmFtZSkgew0KICAgICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKHRoaXMuYWRkTWVudVRlbXBMaXN0W2ldKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmFkZE1lbnVUZW1wTGlzdCA9IGFycmF5Ow0KICAgICAgICB9LA0KICAgICAgICBjaGFuZ2VBZGRyZXNzKCkgew0KICAgICAgICAgICAgdGhpcy51c2VyRm9ybS5hZGRyZXNzID0gSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyRm9ybS5hZGRyZXNzQXJyYXkpOw0KICAgICAgICB9LA0KICAgICAgICBjaGFuZ2VCaXJ0aCh2KSB7DQogICAgICAgICAgICB0aGlzLnVzZXJGb3JtLmJpcnRoID0gdjsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5pbml0KCk7DQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["myHome.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"myHome.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n<div class=\"own-space\">\r\n    <Card>\r\n        <Divider dashed>\r\n            个人门户\r\n            <Button type=\"success\" v-show=\"!editFlag\" @click=\"editFlag = true\">开始编辑</Button>\r\n            <Button type=\"warning\" v-show=\"editFlag\" @click=\"saveEdit\">保存提交</Button>\r\n        </Divider>\r\n        <Form ref=\"userForm\" :model=\"userForm\" :label-width=\"90\" label-position=\"left\">\r\n            <Row :gutter=\"16\">\r\n                <Col :span=\"12\">\r\n                <FormItem label=\"登录账号\" prop=\"username\">\r\n                    <Input v-model=\"userForm.username\" readonly style=\"width: 100%\" />\r\n                </FormItem>\r\n                </Col>\r\n                <Col :span=\"12\">\r\n                <FormItem label=\"姓名\" prop=\"nickname\">\r\n                    <Input v-model=\"userForm.nickname\" readonly style=\"width: 100%\" />\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n            <Row :gutter=\"16\">\r\n                <Col :span=\"12\">\r\n                <FormItem label=\"账号类型\" prop=\"typeTxt\">\r\n                    <Input v-model=\"userForm.typeTxt\" readonly style=\"width: 100%\" />\r\n                </FormItem>\r\n                </Col>\r\n                <!-- <Col :span=\"12\">\r\n                <FormItem label=\"所属部门\" prop=\"departmentTitle\">\r\n                    <Input v-model=\"userForm.departmentTitle\" readonly style=\"width: 100%\" />\r\n                </FormItem>\r\n                </Col> -->\r\n            </Row>\r\n            <Row :gutter=\"16\">\r\n                <Col :span=\"12\">\r\n                <FormItem label=\"性别\" prop=\"username\">\r\n                    <dict dict=\"sex\" v-model=\"userForm.sex\" transfer :readonly=\"!editFlag\" placeholder=\"请选择性别\" style=\"width: 100%\" />\r\n                </FormItem>\r\n                </Col>\r\n                <Col :span=\"12\">\r\n                <FormItem label=\"头像\" prop=\"avatar\">\r\n                    <upload-pic-thumb v-model=\"userForm.avatar\" :multiple=\"false\" style=\"width: 100%\"></upload-pic-thumb>\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n            <Row :gutter=\"16\">\r\n                <Col :span=\"12\">\r\n                <FormItem label=\"所在区县\" prop=\"username\">\r\n                    <al-cascader v-model=\"userForm.addressArray\" :disabled=\"!editFlag\" @on-change=\"changeAddress\" data-type=\"code\" level=\"2\" style=\"width: 100%\" />\r\n                </FormItem>\r\n                </Col>\r\n                <Col :span=\"12\">\r\n                <FormItem label=\"家庭地址\" prop=\"nickname\">\r\n                    <Input v-model=\"userForm.street\" :readonly=\"!editFlag\" style=\"width: 100%\" />\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n            <Row :gutter=\"16\">\r\n                <Col :span=\"12\">\r\n                <FormItem label=\"生日\" prop=\"username\">\r\n                    <DatePicker v-model=\"userForm.birth\" @on-change=\"changeBirth\" :readonly=\"!editFlag\" style=\"width: 100%\" type=\"date\"></DatePicker>\r\n                </FormItem>\r\n                </Col>\r\n                <Col :span=\"12\">\r\n                <FormItem label=\"个性签名\" prop=\"nickname\">\r\n                    <Input v-model=\"userForm.description\" type=\"textarea\" :readonly=\"!editFlag\" style=\"width: 100%\" :autosize=\"{minRows: 3,maxRows: 5}\" placeholder=\"个性签名\"></Input>\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n        </Form>\r\n    </Card>\r\n    <Divider>个人门户</Divider>\r\n    <Card>\r\n        <Row :gutter=\"16\">\r\n            <Col span=\"12\">\r\n            <Divider>当前常用模块</Divider>\r\n            <List header=\"---\" footer=\"---\" border>\r\n                <ListItem v-for=\"(item, index) in addMenuTempList\" :key=\"index\">\r\n                    {{ item.title }}\r\n                    <Button @click=\"deleteOneMenu(item)\" type=\"error\" shape=\"circle\" icon=\"md-trash\" size=\"small\" style=\"marginLeft:20px;\"></Button>\r\n                </ListItem>\r\n            </List>\r\n            </Col>\r\n            <Col span=\"12\">\r\n            <Divider>个人门户设置\r\n                <Button @click=\"addMenuFx\" type=\"primary\">保存更改</Button></Divider>\r\n            <Row :gutter=\"16\">\r\n                <div class=\"desc\">在下面的完成选择菜单即可添加</div>\r\n                <search theme=\"light\" type=\"input\" @changeOk=\"addMenuTempFx\" />\r\n            </Row>\r\n            </Col>\r\n        </Row>\r\n    </Card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getMyDoorList,\r\n    setMyDoorList,\r\n    userInfoEdit\r\n} from \"./api.js\";\r\nimport uploadPicThumb from \"@/views/template/upload-pic-thumb\";\r\nimport Cookies from \"js-cookie\";\r\nimport dict from \"@/views/template/dict\";\r\nimport search from \"./search.vue\";\r\nexport default {\r\n    components: {\r\n        uploadPicThumb,\r\n        dict,\r\n        search\r\n    },\r\n    name: \"my_home_index\",\r\n    data() {\r\n        return {\r\n            editFlag: false,\r\n            userForm: {\r\n                id: \"\",\r\n                avatar: \"\",\r\n                username: \"\",\r\n                sex: \"\",\r\n                status: \"\",\r\n                type: \"\",\r\n                typeTxt: \"\",\r\n                address: \"\",\r\n                addressArray: []\r\n            },\r\n            saveLoading: false,\r\n            addMenuTempList: []\r\n        };\r\n    },\r\n    methods: {\r\n        init() {\r\n            let v = JSON.parse(Cookies.get(\"userInfo\"));\r\n            for (let attr in v) {\r\n                if (v[attr] == null) {\r\n                    v[attr] = \"\";\r\n                }\r\n            }\r\n            let str = JSON.stringify(v);\r\n            let userInfo = JSON.parse(str);\r\n            userInfo.addressArray = [];\r\n            this.userForm = userInfo;\r\n            if (userInfo.address) {\r\n                this.userForm.address = userInfo.address;\r\n                this.userForm.addressArray = JSON.parse(userInfo.address);\r\n            }\r\n            if (this.userForm.type == 0) {\r\n                this.userForm.typeTxt = \"普通用户\";\r\n            } else if (this.userForm.type == 1) {\r\n                this.userForm.typeTxt = \"管理员\";\r\n            }\r\n        },\r\n        addMenuTempFx(e) {\r\n            if (this.addMenuTempList.length > 5) {\r\n                this.$Message.warning(\"最多添加六个常用模块\");\r\n            } else {\r\n                this.addMenuTempList.push(e);\r\n            }\r\n        },\r\n\r\n        addMenuFx() {\r\n            var str = \"\";\r\n            var size = this.addMenuTempList.length;\r\n            if (size > 0) {\r\n                str += this.addMenuTempList[0].name;\r\n                for (var i = 1; i < size; i++) {\r\n                    str += \"ZWZ666\" + this.addMenuTempList[i].name;\r\n                }\r\n            }\r\n            setMyDoorList({\r\n                str: str\r\n            }).then((res) => {\r\n                if (res.success) {\r\n                    this.$Message.warning(\"操作成功\");\r\n                }\r\n            });\r\n        },\r\n        saveEdit() {\r\n            this.saveLoading = true;\r\n            this.editFlag = false;\r\n            if (typeof this.userForm.birth == \"object\") {\r\n                this.userForm.birth = this.format(this.userForm.birth, \"yyyy-MM-dd\");\r\n            }\r\n            delete this.userForm.roles;\r\n            userInfoEdit(this.userForm).then(res => {\r\n                this.saveLoading = false;\r\n                if (res.success) {\r\n                    this.$Message.success(\"保存成功\");\r\n                    // 更新用户信息\r\n                    Cookies.set(\"userInfo\", JSON.stringify(this.userForm));\r\n                    // 更新头像\r\n                    this.$store.commit(\"setAvatarPath\", this.userForm.avatar);\r\n                }\r\n            });\r\n        },\r\n\r\n        getMyDoorListFx() {\r\n            var that = this;\r\n            getMyDoorList().then((res) => {\r\n                that.addMenuTempList = res.result;\r\n            });\r\n        },\r\n        deleteOneMenu(e) {\r\n            var array = [];\r\n            for (var i = 0; i < this.addMenuTempList.length; i++) {\r\n                if (this.addMenuTempList[i].name != e.name) {\r\n                    array.push(this.addMenuTempList[i]);\r\n                }\r\n            }\r\n            this.addMenuTempList = array;\r\n        },\r\n        changeAddress() {\r\n            this.userForm.address = JSON.stringify(this.userForm.addressArray);\r\n        },\r\n        changeBirth(v) {\r\n            this.userForm.birth = v;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n"]}]}