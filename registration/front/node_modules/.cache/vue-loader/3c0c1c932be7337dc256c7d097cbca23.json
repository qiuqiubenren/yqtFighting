{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\password\\password.vue?vue&type=style&index=0&id=3226b965&lang=less","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\password\\password.vue","mtime":1743403543276},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1739857216827},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1739857212421},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":1739857212963},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\less-loader\\dist\\cjs.js","mtime":1739857239884},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouY2hhbmdlLXBhc3Mgew0KICAgICYtYnRuLWJveCB7DQogICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7DQoNCiAgICAgICAgYnV0dG9uIHsNCiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMDsNCg0KICAgICAgICAgICAgc3BhbiB7DQogICAgICAgICAgICAgICAgY29sb3I6ICMyRDhDRjA7DQogICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIC4yczsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgc3Bhbjpob3ZlciB7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwQzI1RjE7DQogICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIC4yczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["password.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"password.vue","sourceRoot":"src/views/password","sourcesContent":["\r\n<template>\r\n<div>\r\n    <Card class=\"change-pass\">\r\n        <p slot=\"title\">\r\n            <Icon type=\"key\"></Icon>修改密码\r\n        </p>\r\n        <div>\r\n            <Form ref=\"editPasswordForm\" :model=\"editPasswordForm\" :label-width=\"100\" label-position=\"right\" :rules=\"passwordValidate\" style=\"width:450px\">\r\n                <FormItem label=\"原密码\" prop=\"oldPass\">\r\n                    <Input type=\"password\" v-model=\"editPasswordForm.oldPass\" placeholder=\"请输入现在使用的密码\"></Input>\r\n                </FormItem>\r\n                <FormItem label=\"新密码\" prop=\"newPass\">\r\n                    <SetPassword v-model=\"editPasswordForm.newPass\" @on-change=\"changeInputPass\" />\r\n                </FormItem>\r\n                <FormItem label=\"确认新密码\" prop=\"rePass\">\r\n                    <Input type=\"password\" v-model=\"editPasswordForm.rePass\" placeholder=\"请再次输入新密码\"></Input>\r\n                </FormItem>\r\n                <FormItem>\r\n                    <Button type=\"primary\" style=\"width: 100px;margin-right:5px\" :loading=\"savePassLoading\" @click=\"saveEditPass\">保存</Button>\r\n                    <Button @click=\"cancelEditPass\">取消</Button>\r\n                </FormItem>\r\n            </Form>\r\n        </div>\r\n    </Card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    changePass\r\n} from \"./api.js\";\r\nimport SetPassword from \"@/views/template/set-password\";\r\nexport default {\r\n    name: \"change_pass\",\r\n    components: {\r\n        SetPassword\r\n    },\r\n    data() {\r\n        const valideRePassword = (rule, value, callback) => {\r\n            if (value !== this.editPasswordForm.newPass) {\r\n                callback(new Error(\"两次输入密码不一致\"));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            savePassLoading: false,\r\n            editPasswordForm: {\r\n                oldPass: \"\",\r\n                newPass: \"\",\r\n                rePass: \"\"\r\n            },\r\n            strength: \"\",\r\n            passwordValidate: {\r\n                oldPass: [{\r\n                    required: true,\r\n                    message: \"请输入原密码\",\r\n                    trigger: \"blur\"\r\n                }],\r\n                newPass: [{\r\n                        required: true,\r\n                        message: \"请输入新密码\",\r\n                        trigger: \"blur\"\r\n                    },\r\n                    {\r\n                        min: 6,\r\n                        message: \"请至少输入6个字符\",\r\n                        trigger: \"blur\"\r\n                    },\r\n                    {\r\n                        max: 32,\r\n                        message: \"最多输入32个字符\",\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                rePass: [{\r\n                        required: true,\r\n                        message: \"请再次输入新密码\",\r\n                        trigger: \"blur\"\r\n                    },\r\n                    {\r\n                        validator: valideRePassword,\r\n                        trigger: \"blur\"\r\n                    }\r\n                ]\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        changeInputPass(v, grade, strength) {\r\n            this.strength = strength;\r\n        },\r\n        saveEditPass() {\r\n            let params = {\r\n                password: this.editPasswordForm.oldPass,\r\n                newPass: this.editPasswordForm.newPass,\r\n                passStrength: this.strength\r\n            };\r\n            this.$refs[\"editPasswordForm\"].validate(valid => {\r\n                if (valid) {\r\n                    this.savePassLoading = true;\r\n                    changePass(params).then(res => {\r\n                        this.savePassLoading = false;\r\n                        if (res.success) {\r\n                            this.$Modal.success({\r\n                                title: \"修改密码成功\",\r\n                                content: \"修改密码成功，需重新登录\",\r\n                                onOk: () => {\r\n                                    this.$store.commit(\"logout\", this);\r\n                                    this.$store.commit(\"clearOpenedSubmenu\");\r\n                                    this.$router.push({\r\n                                        name: \"login\"\r\n                                    });\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        cancelEditPass() {\r\n            this.$store.commit(\"removeTag\", \"password\");\r\n            localStorage.pageOpenedList = JSON.stringify(\r\n                this.$store.state.app.pageOpenedList\r\n            );\r\n            let lastPageName = \"\";\r\n            let length = this.$store.state.app.pageOpenedList.length;\r\n            if (length > 1) {\r\n                lastPageName = this.$store.state.app.pageOpenedList[length - 1].name;\r\n            } else {\r\n                lastPageName = this.$store.state.app.pageOpenedList[0].name;\r\n            }\r\n            this.$router.push({\r\n                name: lastPageName\r\n            });\r\n        }\r\n    },\r\n    mounted() {}\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.change-pass {\r\n    &-btn-box {\r\n        margin-bottom: 10px;\r\n\r\n        button {\r\n            padding-left: 0;\r\n\r\n            span {\r\n                color: #2D8CF0;\r\n                transition: all .2s;\r\n            }\r\n\r\n            span:hover {\r\n                color: #0C25F1;\r\n                transition: all .2s;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"]}]}