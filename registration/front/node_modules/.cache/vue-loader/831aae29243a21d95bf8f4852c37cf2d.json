{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\Main.vue?vue&type=style&index=0&id=c1f1971a&lang=less","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\Main.vue","mtime":1743403543259},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1739857216827},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1739857212421},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":1739857212963},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\less-loader\\dist\\cjs.js","mtime":1739857239884},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCkBpbXBvcnQgIi4vbWFpbi5sZXNzIjsNCg=="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgSA","file":"Main.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<div class=\"main\" :class=\"{'main-hide-text': shrink}\">\r\n    <div class=\"sidebar-menu-con menu-bar\" :style=\"{width: shrink ? '60px' : '220px', overflow: shrink ? 'visible' : 'auto'}\">\r\n        <shrinkable-menu :shrink=\"shrink\" @on-change=\"handleSubmenuChange\" :theme=\"menuTheme\" :before-push=\"beforePush\" :open-names=\"openedSubmenuArr\" :menu-list=\"menuList\">\r\n            <div slot=\"top\" class=\"logo-con\">\r\n                <img v-show=\"!shrink\" src=\"../assets/logo.png\" key=\"max-logo\" />\r\n                <img v-show=\"shrink\" src=\"../assets/logo-min.png\" key=\"min-logo\" />\r\n            </div>\r\n        </shrinkable-menu>\r\n    </div>\r\n    <div class=\"main-header-con\" :style=\"{paddingLeft: shrink?'60px':'220px'}\">\r\n        <div class=\"main-header\">\r\n            <div class=\"navicon-con\">\r\n                <Button :style=\"{transform: 'rotateZ(' + (this.shrink ? '-90' : '0') + 'deg)', height: '48px'}\" type=\"text\" @click=\"toggleClick\">\r\n                    <Icon type=\"md-menu\" size=\"32\"></Icon>\r\n                </Button>\r\n            </div>\r\n            <div class=\"header-middle-con\">\r\n                <div class=\"main-breadcrumb\" v-if=\"navType==4\">\r\n                    <breadcrumb-nav :currentPath=\"currentPath\"></breadcrumb-nav>\r\n                </div>\r\n                <div class=\"main-nav-menu\" v-if=\"navType==1||navType==2\">\r\n                    <Menu mode=\"horizontal\" :active-name=\"currNav\" @on-select=\"selectNav\">\r\n                        <MenuItem v-for=\"(item, i) in navList.slice(0, sliceNum)\" :key=\"i\" :name=\"item.name\">\r\n                        <Icon :type=\"item.icon\" v-if=\"navType==1\" />\r\n                        {{item.title}}\r\n                        </MenuItem>\r\n                        <Submenu name=\"sub\" v-if=\"navList.length>sliceNum\">\r\n                            <template slot=\"title\">更多</template>\r\n                            <MenuItem v-for=\"(item, i) in navList.slice(sliceNum, navList.length)\" :key=\"i\" :name=\"item.name\">\r\n                            <Icon :type=\"item.icon\" v-if=\"navType==1\" />\r\n                            {{item.title}}\r\n                            </MenuItem>\r\n                        </Submenu>\r\n                    </Menu>\r\n                </div>\r\n                <div class=\"main-nav\" v-if=\"navType==3\">\r\n                    <Dropdown transfer @on-click=\"selectNav\">\r\n                        <div style=\"cursor: pointer\">\r\n                            {{currNavTitle}}\r\n                            <Icon type=\"ios-arrow-down\"></Icon>\r\n                        </div>\r\n                        <DropdownMenu slot=\"list\">\r\n                            <DropdownItem v-for=\"(item, i) in navList\" :key=\"i\" :name=\"item.name\" :selected=\"currNav==item.name\">\r\n                                <div class=\"nav-item\">\r\n                                    <Icon :type=\"item.icon\" :size=\"16\" style=\"margin: 0 10px 3px 0\"></Icon>\r\n                                    {{item.title}}\r\n                                </div>\r\n                            </DropdownItem>\r\n                        </DropdownMenu>\r\n                    </Dropdown>\r\n                </div>\r\n            </div>\r\n            <div :class=\"{'header-avator-con':navType!=4, 'header-avator-con nav4':navType==4}\">\r\n                <Dropdown @on-click=\"selectNav\" class=\"options\" v-if=\"navType==4\">\r\n                    <Icon type=\"ios-apps\" :size=\"24\" class=\"language\"></Icon>\r\n                    <DropdownMenu slot=\"list\">\r\n                        <DropdownItem v-for=\"(item, i) in navList\" :key=\"i\" :name=\"item.name\" :selected=\"currNav==item.name\">\r\n                            <div>\r\n                                <Icon :type=\"item.icon\" :size=\"14\" style=\"margin: 0 10px 2px 0\"></Icon>\r\n                                {{item.title}}\r\n                            </div>\r\n                        </DropdownItem>\r\n                    </DropdownMenu>\r\n                </Dropdown>\r\n                <full-screen v-model=\"isFullScreen\" @on-change=\"fullscreenChange\"></full-screen>\r\n                <lock-screen></lock-screen>\r\n                <div class=\"user-dropdown-menu-con\">\r\n                    <Row type=\"flex\" justify=\"end\" align=\"middle\" class=\"user-dropdown-innercon\">\r\n                        <Dropdown transfer trigger=\"hover\" @on-click=\"handleClickUserDropdown\">\r\n                            <a>\r\n                                <span class=\"main-user-name\">{{ username }}</span>\r\n                                <Icon type=\"md-arrow-dropdown\" />\r\n                                <Avatar :src=\"avatarPath\" style=\"background: #619fe7;margin-left: 10px;\"></Avatar>\r\n                            </a>\r\n                            <DropdownMenu slot=\"list\">\r\n                                <DropdownItem name=\"changePass\">修改密码</DropdownItem>\r\n                                <DropdownItem name=\"ownSpace\">个人门户</DropdownItem>\r\n                                <DropdownItem name=\"loginout\" divided>退出</DropdownItem>\r\n                            </DropdownMenu>\r\n                        </Dropdown>\r\n                    </Row>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"tags-con\">\r\n            <tags-page-opened :pageTagsList=\"pageTagsList\"></tags-page-opened>\r\n        </div>\r\n    </div>\r\n    <div class=\"single-page-con\" :style=\"{left: shrink?'60px':'220px'}\">\r\n        <div class=\"single-page\">\r\n            <keep-alive :include=\"cachePage\">\r\n                <router-view></router-view>\r\n            </keep-alive>\r\n        </div>\r\n    </div>\r\n    <circleLoading class=\"loading-position\" v-show=\"loading\" />\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport shrinkableMenu from \"./main-components/shrinkable-menu/shrinkable-menu.vue\";\r\nimport tagsPageOpened from \"./main-components/tags-page-opened.vue\";\r\nimport breadcrumbNav from \"./main-components/breadcrumb-nav.vue\";\r\nimport fullScreen from \"./main-components/fullscreen.vue\";\r\nimport lockScreen from \"./main-components/lockscreen/lockscreen.vue\";\r\nimport circleLoading from \"@/views/template/circle-loading.vue\";\r\nimport Cookies from \"js-cookie\";\r\nimport util from \"@/libs/util.js\";\r\nexport default {\r\n    components: {\r\n        shrinkableMenu,\r\n        tagsPageOpened,\r\n        breadcrumbNav,\r\n        fullScreen,\r\n        lockScreen,\r\n        circleLoading\r\n    },\r\n    data() {\r\n        return {\r\n            sliceNum: 5,\r\n            shrink: false,\r\n            username: \"\",\r\n            userId: \"\",\r\n            isFullScreen: false,\r\n            openedSubmenuArr: this.$store.state.app.openedSubmenuArr,\r\n            lastNav: [],\r\n            navType: 1\r\n        };\r\n    },\r\n    computed: {\r\n        loading() {\r\n            return this.$store.state.app.loading;\r\n        },\r\n        navList() {\r\n            return this.$store.state.app.navList;\r\n        },\r\n        currNav() {\r\n            return this.$store.state.app.currNav;\r\n        },\r\n        currNavTitle() {\r\n            return this.$store.state.app.currNavTitle;\r\n        },\r\n        menuList() {\r\n            return this.$store.state.app.menuList;\r\n        },\r\n        pageTagsList() {\r\n            return this.$store.state.app.pageOpenedList; // 打开的页面的页面对象\r\n        },\r\n        currentPath() {\r\n            return this.$store.state.app.currentPath; // 当前面包屑数组\r\n        },\r\n        avatarPath() {\r\n            return localStorage.avatorImgPath;\r\n        },\r\n        cachePage() {\r\n            return this.$store.state.app.cachePage;\r\n        },\r\n        lang() {\r\n            return this.$store.state.app.lang;\r\n        },\r\n        menuTheme() {\r\n            return this.$store.state.app.menuTheme;\r\n        },\r\n        mesCount() {\r\n            return this.$store.state.app.messageCount;\r\n        }\r\n    },\r\n    methods: {\r\n        init() {\r\n            // 菜单\r\n            let pathArr = util.setCurrentPath(this, this.$route.name);\r\n            // this.$store.commit(\"updateMenulist\");\r\n            if (pathArr.length >= 2) {\r\n                this.$store.commit(\"addOpenSubmenu\", pathArr[1].name);\r\n            }\r\n            let userInfo = JSON.parse(Cookies.get(\"userInfo\"));\r\n            console.log(\"当前登陆者的信息：\", userInfo);\r\n            this.username = userInfo.nickname;\r\n            this.userId = userInfo.id;\r\n            this.checkTag(this.$route.name);\r\n            let currWidth = document.body.clientWidth;\r\n            if (currWidth <= 1200) {\r\n                this.sliceNum = 5;\r\n            }\r\n        },\r\n        selectNav(name) {\r\n            this.$store.commit(\"setCurrNav\", name);\r\n            this.setStore(\"currNav\", name);\r\n            // 清空所有已打开标签\r\n            this.$store.commit(\"clearAllTags\");\r\n            if (this.$route.name != \"home_index\") {\r\n                this.$router.push({\r\n                    name: \"home_index\"\r\n                });\r\n            }\r\n            util.initRouter(this);\r\n        },\r\n        toggleClick() {\r\n            this.shrink = !this.shrink;\r\n        },\r\n        handleClickUserDropdown(name) {\r\n            if (name == \"ownSpace\") {\r\n                util.openNewPage(this, \"my_home_index\");\r\n                this.$router.push({\r\n                    name: \"my_home_index\"\r\n                });\r\n            } else if (name == \"changePass\") {\r\n                util.openNewPage(this, \"password\");\r\n                this.$router.push({\r\n                    name: \"password\"\r\n                });\r\n            } else if (name == \"loginout\") {\r\n                // 退出登录\r\n                this.$store.commit(\"setLoading\", false);\r\n                this.$store.commit(\"setLoading\", true);\r\n                this.$store.commit(\"logout\", this);\r\n                this.$store.commit(\"clearOpenedSubmenu\");\r\n                this.setStore(\"accessToken\", \"\");\r\n                // 强制刷新页面 重新加载router\r\n                location.reload();\r\n            }\r\n        },\r\n        checkTag(name) {\r\n            let openpageHasTag = this.pageTagsList.some(item => {\r\n                if (item.name == name) {\r\n                    return true;\r\n                }\r\n            });\r\n            if (!openpageHasTag) {\r\n                //  解决关闭当前标签后再点击回退按钮会退到当前页时没有标签的问题\r\n                util.openNewPage(\r\n                    this,\r\n                    name,\r\n                    this.$route.params || {},\r\n                    this.$route.query || {}\r\n                );\r\n            }\r\n        },\r\n        handleSubmenuChange(val) {},\r\n        beforePush(name) {\r\n            return true;\r\n        },\r\n        fullscreenChange(isFullScreen) {},\r\n        resize() {\r\n            let currWidth = document.body.clientWidth;\r\n            if (currWidth <= 1200 && currWidth > 900) {\r\n                this.sliceNum = 6;\r\n                this.shrink = true;\r\n            } else if (currWidth <= 900) {\r\n                this.sliceNum = 5;\r\n                this.shrink = true;\r\n            } else {\r\n                this.sliceNum = 7;\r\n                this.shrink = false;\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        $route(to) {\r\n            this.$store.commit(\"setCurrentPageName\", to.name);\r\n            let pathArr = util.setCurrentPath(this, to.name);\r\n            if (pathArr.length > 2) {\r\n                this.$store.commit(\"addOpenSubmenu\", pathArr[1].name);\r\n            }\r\n            this.checkTag(to.name);\r\n            localStorage.currentPageName = to.name;\r\n        },\r\n        lang() {\r\n            util.setCurrentPath(this, this.$route.name); // 在切换语言时用于刷新面包屑\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n        let that = this;\r\n        this.resize();\r\n        window.addEventListener(\"resize\", function () {\r\n            that.resize();\r\n        });\r\n    },\r\n    created() {\r\n        // 显示打开的页面的列表\r\n        this.$store.commit(\"setOpenedList\");\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"./main.less\";\r\n</style>\r\n"]}]}