{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\home\\search.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\home\\search.vue","mtime":1743403543321},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739857230815},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHsNCiAgICBnZXRNZW51TGlzdA0KfSBmcm9tICJAL2FwaS9pbmRleCI7DQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogInNlYXJjaCIsDQogICAgcHJvcHM6IHsNCiAgICAgICAgdGhlbWU6IHsNCiAgICAgICAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgICAgICAgIGRlZmF1bHQ6ICJkYXJrYmx1ZSIsDQogICAgICAgIH0sDQogICAgICAgIHR5cGU6IHsNCiAgICAgICAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgICAgICAgIGRlZmF1bHQ6ICJpbnB1dCIsDQogICAgICAgIH0sDQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAga2V5OiAiIiwNCiAgICAgICAgICAgIGxpc3Q6IFtdLA0KICAgICAgICB9Ow0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHt9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgaW5pdCgpIHsNCiAgICAgICAgICAgIGxldCBtZW51RGF0YSA9IHRoaXMuZ2V0U3RvcmUoIm1lbnVEYXRhIik7DQogICAgICAgICAgICBpZiAoIW1lbnVEYXRhKSB7DQogICAgICAgICAgICAgICAgLy8g56ys5LiA5qyh5Yqg6L29IOivu+WPluaVsOaNrg0KICAgICAgICAgICAgICAgIGxldCBhY2Nlc3NUb2tlbiA9IHRoaXMuZ2V0U3RvcmUoImFjY2Vzc1Rva2VuIik7DQogICAgICAgICAgICAgICAgLy8g5Yqg6L296I+c5Y2VDQogICAgICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgICAgICAgICAgLmdldChnZXRNZW51TGlzdCwgew0KICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbg0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBtZW51RGF0YSA9IHJlcy5yZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QgPSB0aGlzLmdldExpc3QobWVudURhdGEpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbWVudURhdGEgPSBKU09OLnBhcnNlKG1lbnVEYXRhKTsNCiAgICAgICAgICAgICAgICB0aGlzLmxpc3QgPSB0aGlzLmdldExpc3QobWVudURhdGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBnZXRMaXN0KG1lbnVEYXRhKSB7DQogICAgICAgICAgICBsZXQgbGlzdCA9IFtdOw0KICAgICAgICAgICAgbWVudURhdGEuZm9yRWFjaChmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgICAgIGlmIChlLmNoaWxkcmVuICYmIGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyAxDQogICAgICAgICAgICAgICAgICAgIGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMuY2hpbGRyZW4gJiYgYy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0LnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGIudGl0bGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBiLm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHJldHVybiBsaXN0Ow0KICAgICAgICB9LA0KICAgICAgICBjaGFuZ2VNZW51KG5hbWUxMTEpIHsNCiAgICAgICAgICAgIGlmICghbmFtZTExMSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJGVtaXQoImNoYW5nZU9rIiwgbmFtZTExMSk7DQogICAgICAgIH0sDQogICAgICAgIGNsZWFyKCkgew0KICAgICAgICAgICAgdGhpcy4kcmVmcy5zZWxlY3QuY2xlYXJTaW5nbGVTZWxlY3QoKTsNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIG1vdW50ZWQoKSB7DQogICAgICAgIHRoaXMuaW5pdCgpOw0KICAgIH0sDQp9Ow0K"},{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n<div style=\"position: fixed;\">\r\n    <div :class=\"`search-menu search-menu-theme-${theme}`\" v-if=\"type == 'input'\">\r\n        <Select v-model=\"key\" prefix=\"ios-search\" transfer clearable filterable placeholder=\"请选择添加的模块\" @on-change=\"changeMenu\" ref=\"select\">\r\n            <Option v-for=\"(item, index) in list\" :value=\"item\" :key=\"index\">{{\r\n          item.title\r\n        }}</Option>\r\n        </Select>\r\n        <Icon v-show=\"key\" type=\"ios-close-circle\" class=\"close-icon\" @click=\"clear\" style=\"margin-left: 15px;\" />\r\n    </div>\r\n    <div class=\"search-dropdown\" v-else>\r\n        <Dropdown trigger=\"click\" placement=\"bottom-start\">\r\n            <div style=\"display: inline-block\">\r\n                <div class=\"header-right-icon header-action\">\r\n                    <Icon type=\"ios-search\" :size=\"20\" style=\"margin-left: 15px;\" />\r\n                </div>\r\n            </div>\r\n            <div slot=\"list\" class=\"search-select\">\r\n                <Select v-model=\"key\" prefix=\"ios-search\" transfer clearable filterable placeholder=\"艾是OA菜单查询\" @on-change=\"changeMenu\" ref=\"select\">\r\n                    <Option v-for=\"(item, index) in list\" :value=\"item\" :key=\"index\">{{ item.title }}</Option>\r\n                </Select>\r\n            </div>\r\n        </Dropdown>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport {\r\n    getMenuList\r\n} from \"@/api/index\";\r\nexport default {\r\n    name: \"search\",\r\n    props: {\r\n        theme: {\r\n            type: String,\r\n            default: \"darkblue\",\r\n        },\r\n        type: {\r\n            type: String,\r\n            default: \"input\",\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            key: \"\",\r\n            list: [],\r\n        };\r\n    },\r\n    computed: {},\r\n    methods: {\r\n        init() {\r\n            let menuData = this.getStore(\"menuData\");\r\n            if (!menuData) {\r\n                // 第一次加载 读取数据\r\n                let accessToken = this.getStore(\"accessToken\");\r\n                // 加载菜单\r\n                axios\r\n                    .get(getMenuList, {\r\n                        headers: {\r\n                            accessToken: accessToken\r\n                        }\r\n                    })\r\n                    .then((res) => {\r\n                        menuData = res.result;\r\n                        this.list = this.getList(menuData);\r\n                    });\r\n            } else {\r\n                menuData = JSON.parse(menuData);\r\n                this.list = this.getList(menuData);\r\n            }\r\n        },\r\n        getList(menuData) {\r\n            let list = [];\r\n            menuData.forEach(function (e) {\r\n                if (e.children && e.children.length > 0) {\r\n                    // 1\r\n                    e.children.forEach(function (c) {\r\n                        if (c.children && c.children.length > 0) {\r\n                            // 2\r\n                            c.children.forEach(function (b) {\r\n                                list.push({\r\n                                    title: b.title,\r\n                                    name: b.name,\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            return list;\r\n        },\r\n        changeMenu(name111) {\r\n            if (!name111) {\r\n                return;\r\n            }\r\n            this.$emit(\"changeOk\", name111);\r\n        },\r\n        clear() {\r\n            this.$refs.select.clearSingleSelect();\r\n        },\r\n    },\r\n    mounted() {\r\n        this.init();\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.search-menu {\r\n    position: relative;\r\n    display: flex;\r\n    height: 60px;\r\n    align-items: center;\r\n    width: 200px;\r\n\r\n    .ivu-icon {\r\n        font-size: 20px;\r\n    }\r\n\r\n    .close-icon {\r\n        display: none;\r\n        position: absolute;\r\n        font-size: 14px;\r\n        color: #808695;\r\n        right: 8px;\r\n        cursor: pointer;\r\n    }\r\n\r\n    &:hover {\r\n        .close-icon {\r\n            display: block;\r\n        }\r\n    }\r\n\r\n    .ivu-select-selection {\r\n        border: none;\r\n        border-color: none;\r\n        outline: 0;\r\n        box-shadow: none;\r\n        height: 60px;\r\n    }\r\n\r\n    .ivu-select-head-flex {\r\n        height: 60px;\r\n    }\r\n\r\n    .ivu-select-arrow {\r\n        display: none;\r\n    }\r\n\r\n    .ivu-select-selection-focused .ivu-select-arrow,\r\n    .ivu-select-selection:hover .ivu-select-arrow {\r\n        display: none;\r\n    }\r\n\r\n    input::-webkit-input-placeholder {\r\n        color: #999;\r\n    }\r\n\r\n    input::-moz-placeholder {\r\n        color: #999;\r\n    }\r\n\r\n    input::-ms-input-placeholder {\r\n        color: #999;\r\n    }\r\n}\r\n\r\n.search-menu-theme-darkblue {\r\n    .ivu-icon {\r\n        color: hsla(0, 0%, 100%, 0.65);\r\n    }\r\n\r\n    .ivu-select-selection {\r\n        background: #17233d;\r\n    }\r\n\r\n    .ivu-select-input {\r\n        color: hsla(0, 0%, 100%, 0.65);\r\n    }\r\n\r\n    input::-webkit-input-placeholder {\r\n        color: #707786;\r\n    }\r\n\r\n    input::-moz-placeholder {\r\n        color: #707786;\r\n    }\r\n\r\n    input::-ms-input-placeholder {\r\n        color: #707786;\r\n    }\r\n}\r\n\r\n.search-menu-theme-primary {\r\n    .ivu-icon {\r\n        color: #fff;\r\n    }\r\n\r\n    .ivu-select-selection {\r\n        background: #2d8cf0;\r\n    }\r\n\r\n    .ivu-select-input {\r\n        color: #fff;\r\n    }\r\n\r\n    input::-webkit-input-placeholder {\r\n        color: rgb(233, 233, 233);\r\n    }\r\n\r\n    input::-moz-placeholder {\r\n        color: rgb(233, 233, 233);\r\n    }\r\n\r\n    input::-ms-input-placeholder {\r\n        color: rgb(233, 233, 233);\r\n    }\r\n}\r\n\r\n.search-menu-theme-black {\r\n    .ivu-icon {\r\n        color: hsla(0, 0%, 100%, 0.65);\r\n    }\r\n\r\n    .ivu-select-selection {\r\n        background: #1f1f1f;\r\n    }\r\n\r\n    .ivu-select-input {\r\n        color: hsla(0, 0%, 100%, 0.65);\r\n    }\r\n\r\n    input::-webkit-input-placeholder {\r\n        color: #707786;\r\n    }\r\n\r\n    input::-moz-placeholder {\r\n        color: #707786;\r\n    }\r\n\r\n    input::-ms-input-placeholder {\r\n        color: #707786;\r\n    }\r\n}\r\n\r\n.search-dropdown {\r\n    .ivu-select-dropdown {\r\n        padding: 8px 16px;\r\n    }\r\n\r\n    .search-select {\r\n        width: 265px;\r\n    }\r\n}\r\n</style>\r\n"]}]}