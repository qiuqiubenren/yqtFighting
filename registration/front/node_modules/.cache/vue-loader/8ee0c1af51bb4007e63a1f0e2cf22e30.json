{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\template\\department-choose.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\template\\department-choose.vue","mtime":1743403543320},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739857230815},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICAgIGluaXREZXBhcnRtZW50DQp9IGZyb20gIkAvYXBpL2luZGV4IjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAiZGVwYXJ0bWVudENob29zZSIsDQogICAgcHJvcHM6IHsNCg0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHNlbGVjdERlcDogW10sDQogICAgICAgICAgICBkZXBhcnRtZW50OiBbXQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBpbml0RGVwYXJ0bWVudERhdGEoKSB7DQogICAgICAgICAgICBpbml0RGVwYXJ0bWVudCgpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5pc1BhcmVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudmFsdWUgPSBlLmlkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubGFiZWwgPSBlLnRpdGxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2hpbGRyZW4gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS52YWx1ZSA9IGUuaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5sYWJlbCA9IGUudGl0bGU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zdGF0dXMgPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmxhYmVsID0gIlvlt7LnpoHnlKhdICIgKyBlLmxhYmVsOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBhcnRtZW50ID0gcmVzLnJlc3VsdDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgbG9hZERhdGEoaXRlbSwgY2FsbGJhY2spIHsNCiAgICAgICAgICAgIGl0ZW0ubG9hZGluZyA9IHRydWU7DQogICAgICAgICAgICBpbml0RGVwYXJ0bWVudCh7DQogICAgICAgICAgICAgICAgcGFyZW50SWQ6IGl0ZW0udmFsdWUNCiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBpdGVtLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5pc1BhcmVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudmFsdWUgPSBlLmlkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubGFiZWwgPSBlLnRpdGxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2hpbGRyZW4gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS52YWx1ZSA9IGUuaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5sYWJlbCA9IGUudGl0bGU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zdGF0dXMgPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmxhYmVsID0gIlvlt7LnpoHnlKhdICIgKyBlLmxhYmVsOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGlsZHJlbiA9IHJlcy5yZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIGhhbmRsZUNoYW5nZURlcCh2YWx1ZSwgc2VsZWN0ZWREYXRhKSB7DQogICAgICAgICAgICBsZXQgZGVwYXJ0bWVudElkID0gIiI7DQogICAgICAgICAgICAvLyDojrflj5bmnIDlkI7kuIDkuKrlgLwNCiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgZGVwYXJ0bWVudElkID0gdmFsdWVbdmFsdWUubGVuZ3RoIC0gMV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCBkZXBhcnRtZW50SWQpOw0KICAgICAgICB9LA0KICAgICAgICBjbGVhclNlbGVjdCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGVwID0gW107DQogICAgICAgIH0NCiAgICB9LA0KICAgIG1vdW50ZWQoKSB7DQogICAgICAgIHRoaXMuaW5pdERlcGFydG1lbnREYXRhKCk7DQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["department-choose.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"department-choose.vue","sourceRoot":"src/views/template","sourcesContent":["<template>\r\n<div>\r\n    <Cascader v-model=\"selectDep\" :data=\"department\" :load-data=\"loadData\" @on-change=\"handleChangeDep\" change-on-select filterable clearable placeholder=\"选择部门\"></Cascader>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    initDepartment\r\n} from \"@/api/index\";\r\nexport default {\r\n    name: \"departmentChoose\",\r\n    props: {\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            selectDep: [],\r\n            department: []\r\n        };\r\n    },\r\n    methods: {\r\n        initDepartmentData() {\r\n            initDepartment().then(res => {\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.value = e.id;\r\n                            e.label = e.title;\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        } else {\r\n                            e.value = e.id;\r\n                            e.label = e.title;\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.label = \"[已禁用] \" + e.label;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    this.department = res.result;\r\n                }\r\n            });\r\n        },\r\n        loadData(item, callback) {\r\n            item.loading = true;\r\n            initDepartment({\r\n                parentId: item.value\r\n            }).then(res => {\r\n                item.loading = false;\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.value = e.id;\r\n                            e.label = e.title;\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        } else {\r\n                            e.value = e.id;\r\n                            e.label = e.title;\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.label = \"[已禁用] \" + e.label;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    item.children = res.result;\r\n                    callback();\r\n                }\r\n            });\r\n        },\r\n        handleChangeDep(value, selectedData) {\r\n            let departmentId = \"\";\r\n            // 获取最后一个值\r\n            if (value && value.length > 0) {\r\n                departmentId = value[value.length - 1];\r\n            }\r\n            this.$emit(\"on-change\", departmentId);\r\n        },\r\n        clearSelect() {\r\n            this.selectDep = [];\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initDepartmentData();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n</style>\r\n"]}]}