{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\template\\upload-pic-thumb.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\template\\upload-pic-thumb.vue","mtime":1743403543276},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739857230815},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgInZpZXdlcmpzL2Rpc3Qvdmlld2VyLmNzcyI7DQppbXBvcnQgVmlld2VyIGZyb20gInZpZXdlcmpzIjsNCmltcG9ydCB7DQogICAgdXBsb2FkRmlsZQ0KfSBmcm9tICJAL2FwaS9pbmRleCI7DQppbXBvcnQgdnVlZHJhZ2dhYmxlIGZyb20gInZ1ZWRyYWdnYWJsZSI7DQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogInVwbG9hZFBpY1RodW1iIiwNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIHZ1ZWRyYWdnYWJsZQ0KICAgIH0sDQogICAgcHJvcHM6IHsNCiAgICAgICAgdmFsdWU6IHsNCiAgICAgICAgICAgIHR5cGU6IG51bGwNCiAgICAgICAgfSwNCiAgICAgICAgZHJhZ2dhYmxlOiB7DQogICAgICAgICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICBtdWx0aXBsZTogew0KICAgICAgICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgbWF4U2l6ZTogew0KICAgICAgICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgICAgICAgZGVmYXVsdDogNQ0KICAgICAgICB9LA0KICAgICAgICBsaW1pdDogew0KICAgICAgICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgICAgICAgZGVmYXVsdDogMTANCiAgICAgICAgfSwNCiAgICAgICAgd2lkdGg6IHsNCiAgICAgICAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgICAgICAgIGRlZmF1bHQ6ICI2MHB4Ig0KICAgICAgICB9LA0KICAgICAgICBoZWlnaHQ6IHsNCiAgICAgICAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgICAgICAgIGRlZmF1bHQ6ICI2MHB4Ig0KICAgICAgICB9LA0KICAgICAgICBhY2NlcHQ6IHsNCiAgICAgICAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgICAgICAgIGRlZmF1bHQ6ICIuanBnLCAuanBlZywgLnBuZywgLmdpZiINCiAgICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgZm9ybWF0KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXB0KSB7DQogICAgICAgICAgICAgICAgbGV0IGZvcm1hdCA9IFtdOw0KICAgICAgICAgICAgICAgIHRoaXMuYWNjZXB0LnNwbGl0KCIsIikuZm9yRWFjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0LnB1c2goZS5yZXBsYWNlKCIuIiwgIiIpLnJlcGxhY2UoIiAiLCAiIikpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXQ7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB7fSwNCiAgICAgICAgICAgIHVwbG9hZEZpbGVVcmw6IHVwbG9hZEZpbGUsDQogICAgICAgICAgICB1cGxvYWRMaXN0OiBbXQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBvbkVuZCgpIHsNCiAgICAgICAgICAgIHRoaXMucmV0dXJuVmFsdWUoKTsNCiAgICAgICAgfSwNCiAgICAgICAgaW5pdCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2V0RGF0YSh0aGlzLnZhbHVlLCB0cnVlKTsNCiAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSB7DQogICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuZ2V0U3RvcmUoImFjY2Vzc1Rva2VuIikNCiAgICAgICAgICAgIH07DQogICAgICAgIH0sDQogICAgICAgIGhhbmRsZVZpZXcodiwgaSkgew0KICAgICAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7DQogICAgICAgICAgICBpbWFnZS5zcmMgPSB2Ow0KICAgICAgICAgICAgbGV0IHZpZXdlciA9IG5ldyBWaWV3ZXIoaW1hZ2UsIHsNCiAgICAgICAgICAgICAgICBoaWRkZW46IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICAgICAgdmlld2VyLmRlc3Ryb3koKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHZpZXdlci5zaG93KCk7DQogICAgICAgIH0sDQogICAgICAgIGhhbmRsZVJlbW92ZShmaWxlKSB7DQogICAgICAgICAgICBjb25zdCB1cGxvYWRMaXN0ID0gdGhpcy51cGxvYWRMaXN0Ow0KICAgICAgICAgICAgdGhpcy51cGxvYWRMaXN0LnNwbGljZSh1cGxvYWRMaXN0LmluZGV4T2YoZmlsZSksIDEpOw0KICAgICAgICAgICAgdGhpcy5yZXR1cm5WYWx1ZSgpOw0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSkgew0KICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgZmlsZS51cmwgPSByZXMucmVzdWx0Ow0KICAgICAgICAgICAgICAgIC8vIOWNleW8oOWbvueJh+WkhOeQhg0KICAgICAgICAgICAgICAgIGlmICghdGhpcy5tdWx0aXBsZSAmJiB0aGlzLnVwbG9hZExpc3QubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyDliKDpmaTnrKzkuIDlvKANCiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRMaXN0LnNwbGljZSgwLCAxKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRMaXN0LnB1c2goZmlsZSk7DQogICAgICAgICAgICAgICAgLy8g6L+U5Zue57uE5Lu25YC8DQogICAgICAgICAgICAgICAgdGhpcy5yZXR1cm5WYWx1ZSgpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IsIGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVycm9yLnRvU3RyaW5nKCkpOw0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVGb3JtYXRFcnJvcihmaWxlKSB7DQogICAgICAgICAgICB0aGlzLiROb3RpY2Uud2FybmluZyh7DQogICAgICAgICAgICAgICAgdGl0bGU6ICLkuI3mlK/mjIHnmoTmlofku7bmoLzlvI8iLA0KICAgICAgICAgICAgICAgIGRlc2M6ICLmiYDpgInmlofku7bigJggIiArDQogICAgICAgICAgICAgICAgICAgIGZpbGUubmFtZSArDQogICAgICAgICAgICAgICAgICAgICIg4oCZ5qC85byP5LiN5q2j56GuLCDor7fpgInmi6kgIiArDQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjZXB0ICsNCiAgICAgICAgICAgICAgICAgICAgIiDlm77niYfmoLzlvI/mlofku7YiDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgaGFuZGxlTWF4U2l6ZShmaWxlKSB7DQogICAgICAgICAgICB0aGlzLiROb3RpY2Uud2FybmluZyh7DQogICAgICAgICAgICAgICAgdGl0bGU6ICLmlofku7blpKflsI/ov4flpKciLA0KICAgICAgICAgICAgICAgIGRlc2M6ICLmiYDpgInmlofku7bigJggIiArDQogICAgICAgICAgICAgICAgICAgIGZpbGUubmFtZSArDQogICAgICAgICAgICAgICAgICAgICIg4oCZ5aSn5bCP6L+H5aSnLCDkuI3lvpfotoXov4cgIiArDQogICAgICAgICAgICAgICAgICAgIHRoaXMubWF4U2l6ZSArDQogICAgICAgICAgICAgICAgICAgICJNLiINCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVCZWZvcmVVcGxvYWQoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0aGlzLnVwbG9hZExpc3QubGVuZ3RoID49IHRoaXMubGltaXQpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuacgOWkmuWPquiDveS4iuS8oCIgKyB0aGlzLmxpbWl0ICsgIuW8oOWbvueJhyIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICByZXR1cm5WYWx1ZSgpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy51cGxvYWRMaXN0IHx8IHRoaXMudXBsb2FkTGlzdC5sZW5ndGggPCAxKSB7DQogICAgICAgICAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgIiIpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCAiIik7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCBbXSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIFtdKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgLy8g5Y2V5bygDQogICAgICAgICAgICAgICAgbGV0IHYgPSB0aGlzLnVwbG9hZExpc3RbMF0udXJsOw0KICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoImlucHV0Iiwgdik7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdik7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGxldCB2ID0gW107DQogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRMaXN0LmZvckVhY2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHYucHVzaChlLnVybCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCB2KTsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB2KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2V0RGF0YSh2LCBpbml0KSB7DQogICAgICAgICAgICBpZiAodHlwZW9mIHYgPT0gInN0cmluZyIpIHsNCiAgICAgICAgICAgICAgICAvLyDljZXlvKANCiAgICAgICAgICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuWkmuW8oOS4iuS8oOS7heaUr+aMgeaVsOe7hOaVsOaNruexu+WeiyIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICghdikgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkTGlzdCA9IFtdOw0KICAgICAgICAgICAgICAgIGxldCBpdGVtID0gew0KICAgICAgICAgICAgICAgICAgICB1cmw6IHYsDQogICAgICAgICAgICAgICAgICAgIHN0YXR1czogImZpbmlzaGVkIg0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRMaXN0LnB1c2goaXRlbSk7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdik7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09ICJvYmplY3QiKSB7DQogICAgICAgICAgICAgICAgLy8g5aSa5bygDQogICAgICAgICAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5Y2V5byg5LiK5Lyg5LuF5pSv5oyB5a2X56ym5Liy5pWw5o2u57G75Z6LIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy51cGxvYWRMaXN0ID0gW107DQogICAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoID4gdGhpcy5saW1pdCkgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGltaXQ7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB2W2ldLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogImZpbmlzaGVkIg0KICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkTGlzdC5wdXNoKGl0ZW0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHYuc2xpY2UoMCwgdGhpcy5saW1pdCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCB2LnNsaWNlKDAsIHRoaXMubGltaXQpKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuacgOWkmuWPquiDveS4iuS8oCIgKyB0aGlzLmxpbWl0ICsgIuW8oOWbvueJhyIpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHYuZm9yRWFjaChlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdGVtID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICJmaW5pc2hlZCINCiAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZExpc3QucHVzaChpdGVtKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHYpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgICAgdmFsdWUodmFsKSB7DQogICAgICAgICAgICB0aGlzLnNldERhdGEodmFsKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5pbml0KCk7DQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["upload-pic-thumb.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"upload-pic-thumb.vue","sourceRoot":"src/views/template","sourcesContent":["<template>\r\n<div class=\"upload-thumb\">\r\n    <vuedraggable :list=\"uploadList\" :disabled=\"!draggable||!multiple\" :animation=\"200\" class=\"list-group\" ghost-class=\"thumb-ghost\" @end=\"onEnd\">\r\n        <div class=\"upload-list\" :style=\"{width: `calc(${width} + 2px)`, height: `calc(${height} + 2px)`, lineHeight: height}\" v-for=\"(item, index) in uploadList\" :key=\"index\">\r\n            <div v-if=\"item.status == 'finished'\">\r\n                <img :src=\"item.url\" :style=\"{height: height}\" />\r\n                <div class=\"upload-list-cover\">\r\n                    <Icon type=\"ios-eye-outline\" @click=\"handleView(item.url, index)\"></Icon>\r\n                    <Icon type=\"ios-trash-outline\" @click=\"handleRemove(item)\"></Icon>\r\n                </div>\r\n            </div>\r\n            <div v-else>\r\n                <Progress v-if=\"item.showProgress\" :percent=\"item.percentage\" hide-info></Progress>\r\n            </div>\r\n        </div>\r\n    </vuedraggable>\r\n    <Upload ref=\"upload\" :multiple=\"multiple\" :show-upload-list=\"false\" :on-success=\"handleSuccess\" :on-error=\"handleError\" :format=\"format\" :accept=\"accept\" :max-size=\"maxSize*1024\" :on-format-error=\"handleFormatError\" :on-exceeded-size=\"handleMaxSize\" :before-upload=\"handleBeforeUpload\" type=\"drag\" :action=\"uploadFileUrl\" :headers=\"accessToken\" class=\"upload-btn\" :style=\"{width: width}\">\r\n        <div class=\"upload-camera\" :style=\"{width: width, height: height, lineHeight: height}\">\r\n            <Icon type=\"md-camera\" size=\"20\"></Icon>\r\n        </div>\r\n    </Upload>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport \"viewerjs/dist/viewer.css\";\r\nimport Viewer from \"viewerjs\";\r\nimport {\r\n    uploadFile\r\n} from \"@/api/index\";\r\nimport vuedraggable from \"vuedraggable\";\r\nexport default {\r\n    name: \"uploadPicThumb\",\r\n    components: {\r\n        vuedraggable\r\n    },\r\n    props: {\r\n        value: {\r\n            type: null\r\n        },\r\n        draggable: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        multiple: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        maxSize: {\r\n            type: Number,\r\n            default: 5\r\n        },\r\n        limit: {\r\n            type: Number,\r\n            default: 10\r\n        },\r\n        width: {\r\n            type: String,\r\n            default: \"60px\"\r\n        },\r\n        height: {\r\n            type: String,\r\n            default: \"60px\"\r\n        },\r\n        accept: {\r\n            type: String,\r\n            default: \".jpg, .jpeg, .png, .gif\"\r\n        }\r\n    },\r\n    computed: {\r\n        format() {\r\n            if (this.accept) {\r\n                let format = [];\r\n                this.accept.split(\",\").forEach(e => {\r\n                    format.push(e.replace(\".\", \"\").replace(\" \", \"\"));\r\n                });\r\n                return format;\r\n            } else {\r\n                return [];\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            accessToken: {},\r\n            uploadFileUrl: uploadFile,\r\n            uploadList: []\r\n        };\r\n    },\r\n    methods: {\r\n        onEnd() {\r\n            this.returnValue();\r\n        },\r\n        init() {\r\n            this.setData(this.value, true);\r\n            this.accessToken = {\r\n                accessToken: this.getStore(\"accessToken\")\r\n            };\r\n        },\r\n        handleView(v, i) {\r\n            let image = new Image();\r\n            image.src = v;\r\n            let viewer = new Viewer(image, {\r\n                hidden: function () {\r\n                    viewer.destroy();\r\n                }\r\n            });\r\n            viewer.show();\r\n        },\r\n        handleRemove(file) {\r\n            const uploadList = this.uploadList;\r\n            this.uploadList.splice(uploadList.indexOf(file), 1);\r\n            this.returnValue();\r\n        },\r\n        handleSuccess(res, file) {\r\n            if (res.success) {\r\n                file.url = res.result;\r\n                // 单张图片处理\r\n                if (!this.multiple && this.uploadList.length > 0) {\r\n                    // 删除第一张\r\n                    this.uploadList.splice(0, 1);\r\n                }\r\n                this.uploadList.push(file);\r\n                // 返回组件值\r\n                this.returnValue();\r\n            } else {\r\n                this.$Message.error(res.message);\r\n            }\r\n        },\r\n        handleError(error, file, fileList) {\r\n            this.$Message.error(error.toString());\r\n        },\r\n        handleFormatError(file) {\r\n            this.$Notice.warning({\r\n                title: \"不支持的文件格式\",\r\n                desc: \"所选文件‘ \" +\r\n                    file.name +\r\n                    \" ’格式不正确, 请选择 \" +\r\n                    this.accept +\r\n                    \" 图片格式文件\"\r\n            });\r\n        },\r\n        handleMaxSize(file) {\r\n            this.$Notice.warning({\r\n                title: \"文件大小过大\",\r\n                desc: \"所选文件‘ \" +\r\n                    file.name +\r\n                    \" ’大小过大, 不得超过 \" +\r\n                    this.maxSize +\r\n                    \"M.\"\r\n            });\r\n        },\r\n        handleBeforeUpload() {\r\n            if (this.multiple && this.uploadList.length >= this.limit) {\r\n                this.$Message.warning(\"最多只能上传\" + this.limit + \"张图片\");\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        returnValue() {\r\n            if (!this.uploadList || this.uploadList.length < 1) {\r\n                if (!this.multiple) {\r\n                    this.$emit(\"input\", \"\");\r\n                    this.$emit(\"on-change\", \"\");\r\n                } else {\r\n                    this.$emit(\"input\", []);\r\n                    this.$emit(\"on-change\", []);\r\n                }\r\n                return;\r\n            }\r\n            if (!this.multiple) {\r\n                // 单张\r\n                let v = this.uploadList[0].url;\r\n                this.$emit(\"input\", v);\r\n                this.$emit(\"on-change\", v);\r\n            } else {\r\n                let v = [];\r\n                this.uploadList.forEach(e => {\r\n                    v.push(e.url);\r\n                });\r\n                this.$emit(\"input\", v);\r\n                this.$emit(\"on-change\", v);\r\n            }\r\n        },\r\n        setData(v, init) {\r\n            if (typeof v == \"string\") {\r\n                // 单张\r\n                if (this.multiple) {\r\n                    this.$Message.warning(\"多张上传仅支持数组数据类型\");\r\n                    return;\r\n                }\r\n                if (!v) {\r\n                    return;\r\n                }\r\n                this.uploadList = [];\r\n                let item = {\r\n                    url: v,\r\n                    status: \"finished\"\r\n                };\r\n                this.uploadList.push(item);\r\n                this.$emit(\"on-change\", v);\r\n            } else if (typeof v == \"object\") {\r\n                // 多张\r\n                if (!this.multiple) {\r\n                    this.$Message.warning(\"单张上传仅支持字符串数据类型\");\r\n                    return;\r\n                }\r\n                this.uploadList = [];\r\n                if (v.length > this.limit) {\r\n                    for (let i = 0; i < this.limit; i++) {\r\n                        let item = {\r\n                            url: v[i],\r\n                            status: \"finished\"\r\n                        };\r\n                        this.uploadList.push(item);\r\n                    }\r\n                    this.$emit(\"on-change\", v.slice(0, this.limit));\r\n                    if (init) {\r\n                        this.$emit(\"input\", v.slice(0, this.limit));\r\n                    }\r\n                    this.$Message.warning(\"最多只能上传\" + this.limit + \"张图片\");\r\n                } else {\r\n                    v.forEach(e => {\r\n                        let item = {\r\n                            url: e,\r\n                            status: \"finished\"\r\n                        };\r\n                        this.uploadList.push(item);\r\n                    });\r\n                    this.$emit(\"on-change\", v);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        value(val) {\r\n            this.setData(val);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.upload-thumb {\r\n    display: flex;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n\r\n    .upload-list {\r\n        display: inline-block;\r\n        text-align: center;\r\n        border: 1px solid transparent;\r\n        border-radius: 4px;\r\n        overflow: hidden;\r\n        background: #fff;\r\n        position: relative;\r\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\r\n        margin-right: 8px;\r\n    }\r\n\r\n    .upload-list img {\r\n        object-fit: cover;\r\n    }\r\n\r\n    .upload-btn {\r\n        display: inline-block;\r\n    }\r\n\r\n    .upload-list-cover {\r\n        display: none;\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: rgba(0, 0, 0, 0.6);\r\n    }\r\n\r\n    .upload-list:hover .upload-list-cover {\r\n        display: block;\r\n    }\r\n\r\n    .upload-list-cover i {\r\n        color: #fff;\r\n        font-size: 20px;\r\n        cursor: pointer;\r\n        margin: 0 2px;\r\n    }\r\n\r\n    .list-group {\r\n        display: inline-block;\r\n    }\r\n\r\n    .thumb-ghost {\r\n        opacity: 0.5;\r\n        background: #c8ebfb;\r\n    }\r\n}\r\n</style>\r\n"]}]}