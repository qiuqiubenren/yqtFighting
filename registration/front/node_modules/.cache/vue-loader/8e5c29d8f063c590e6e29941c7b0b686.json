{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\template\\department-tree-choose.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\template\\department-tree-choose.vue","mtime":1743403543327},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739857230815},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICAgIGluaXREZXBhcnRtZW50LA0KICAgIGxvYWREZXBhcnRtZW50LA0KICAgIHNlYXJjaERlcGFydG1lbnQNCn0gZnJvbSAiQC9hcGkvaW5kZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJkZXBhcnRtZW50VHJlZUNob29zZSIsDQogICAgcHJvcHM6IHsNCiAgICAgICAgbXVsdGlwbGU6IHsNCiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhcmFibGU6IHsNCiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICAgICAgICBkZWZhdWx0OiB0cnVlDQogICAgICAgIH0sDQogICAgICAgIHBsYWNlaG9sZGVyOiB7DQogICAgICAgICAgICB0eXBlOiBTdHJpbmcsDQogICAgICAgICAgICBkZWZhdWx0OiAi54K55Ye76YCJ5oup6YOo6ZeoIg0KICAgICAgICB9DQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgZGVwTG9hZGluZzogZmFsc2UsDQogICAgICAgICAgICBkZXBhcnRtZW50VGl0bGU6ICIiLA0KICAgICAgICAgICAgc2VhcmNoS2V5OiAiIiwNCiAgICAgICAgICAgIGRhdGFEZXA6IFtdLA0KICAgICAgICAgICAgc2VsZWN0RGVwOiBbXSwNCiAgICAgICAgICAgIGRlcGFydG1lbnRJZDogW10NCiAgICAgICAgfTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgaW5pdERlcGFydG1lbnREYXRhKCkgew0KICAgICAgICAgICAgaW5pdERlcGFydG1lbnQoKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuaXNQYXJlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNoaWxkcmVuID0gW107DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zdGF0dXMgPT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRpdGxlID0gIlvlt7LnpoHnlKhdICIgKyBlLnRpdGxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhRGVwID0gcmVzLnJlc3VsdDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgbG9hZERhdGEoaXRlbSwgY2FsbGJhY2spIHsNCiAgICAgICAgICAgIGxvYWREZXBhcnRtZW50KGl0ZW0uaWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5pc1BhcmVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2hpbGRyZW4gPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnN0YXR1cyA9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGl0bGUgPSAiW+W3suemgeeUqF0gIiArIGUudGl0bGU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXMucmVzdWx0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgc2VhcmNoRGVwKCkgew0KICAgICAgICAgICAgLy8g5pCc57Si6YOo6ZeoDQogICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hLZXkpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlcExvYWRpbmcgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHNlYXJjaERlcGFydG1lbnQoew0KICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5zZWFyY2hLZXkNCiAgICAgICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnN0YXR1cyA9PSAtMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRpdGxlID0gIlvlt7LnpoHnlKhdICIgKyBlLnRpdGxlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YURlcCA9IHJlcy5yZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5pbml0RGVwYXJ0bWVudERhdGEoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2VsZWN0VHJlZSh2KSB7DQogICAgICAgICAgICBsZXQgaWRzID0gW10sDQogICAgICAgICAgICAgICAgdGl0bGUgPSAiIjsNCiAgICAgICAgICAgIHYuZm9yRWFjaChlID0+IHsNCiAgICAgICAgICAgICAgICBpZHMucHVzaChlLmlkKTsNCiAgICAgICAgICAgICAgICBpZiAodGl0bGUgPT0gIiIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBlLnRpdGxlOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlID0gdGl0bGUgKyAi44CBIiArIGUudGl0bGU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLmRlcGFydG1lbnRJZCA9IGlkczsNCiAgICAgICAgICAgIHRoaXMuZGVwYXJ0bWVudFRpdGxlID0gdGl0bGU7DQogICAgICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHRoaXMuZGVwYXJ0bWVudElkKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5kZXBhcnRtZW50SWRbMF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBjbGVhclNlbGVjdCgpIHsNCiAgICAgICAgICAgIHRoaXMuZGVwYXJ0bWVudElkID0gW107DQogICAgICAgICAgICB0aGlzLmRlcGFydG1lbnRUaXRsZSA9ICIiOw0KICAgICAgICAgICAgdGhpcy5pbml0RGVwYXJ0bWVudERhdGEoKTsNCiAgICAgICAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgW10pOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCAiIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRlbWl0KCJvbi1jbGVhciIpOw0KICAgICAgICB9LA0KICAgICAgICBzZXREYXRhKGlkcywgdGl0bGUpIHsNCiAgICAgICAgICAgIHRoaXMuZGVwYXJ0bWVudFRpdGxlID0gdGl0bGU7DQogICAgICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkgew0KICAgICAgICAgICAgICAgIHRoaXMuZGVwYXJ0bWVudElkID0gaWRzOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmRlcGFydG1lbnRJZCA9IFtdOw0KICAgICAgICAgICAgICAgIHRoaXMuZGVwYXJ0bWVudElkLnB1c2goaWRzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHRoaXMuZGVwYXJ0bWVudElkKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5pbml0RGVwYXJ0bWVudERhdGEoKTsNCiAgICB9DQp9Ow0K"},{"version":3,"sources":["department-tree-choose.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"department-tree-choose.vue","sourceRoot":"src/views/template","sourcesContent":["<template>\r\n<div>\r\n    <div style=\"display:flex;\">\r\n        <Input v-model=\"departmentTitle\" readonly style=\"margin-right:10px;\" :placeholder=\"placeholder\" :clearable=\"clearable\" @on-clear=\"clearSelect\" />\r\n        <Poptip transfer trigger=\"click\" placement=\"right\" title=\"选择部门\" width=\"250\">\r\n            <Button icon=\"md-list\">选择部门</Button>\r\n            <div slot=\"content\">\r\n                <Input v-model=\"searchKey\" suffix=\"ios-search\" @on-change=\"searchDep\" placeholder=\"输入部门名搜索\" clearable />\r\n                <div class=\"dep-tree-bar\">\r\n                    <Tree :data=\"dataDep\" :load-data=\"loadData\" @on-select-change=\"selectTree\" :multiple=\"multiple\"></Tree>\r\n                    <Spin size=\"large\" fix v-if=\"depLoading\"></Spin>\r\n                </div>\r\n            </div>\r\n        </Poptip>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    initDepartment,\r\n    loadDepartment,\r\n    searchDepartment\r\n} from \"@/api/index\";\r\nexport default {\r\n    name: \"departmentTreeChoose\",\r\n    props: {\r\n        multiple: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        clearable: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        placeholder: {\r\n            type: String,\r\n            default: \"点击选择部门\"\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            depLoading: false,\r\n            departmentTitle: \"\",\r\n            searchKey: \"\",\r\n            dataDep: [],\r\n            selectDep: [],\r\n            departmentId: []\r\n        };\r\n    },\r\n    methods: {\r\n        initDepartmentData() {\r\n            initDepartment().then(res => {\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.title = \"[已禁用] \" + e.title;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    this.dataDep = res.result;\r\n                }\r\n            });\r\n        },\r\n        loadData(item, callback) {\r\n            loadDepartment(item.id).then(res => {\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.title = \"[已禁用] \" + e.title;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    callback(res.result);\r\n                }\r\n            });\r\n        },\r\n        searchDep() {\r\n            // 搜索部门\r\n            if (this.searchKey) {\r\n                this.depLoading = true;\r\n                searchDepartment({\r\n                    title: this.searchKey\r\n                }).then(res => {\r\n                    this.depLoading = false;\r\n                    if (res.success) {\r\n                        res.result.forEach(function (e) {\r\n                            if (e.status == -1) {\r\n                                e.title = \"[已禁用] \" + e.title;\r\n                                e.disabled = true;\r\n                            }\r\n                        });\r\n                        this.dataDep = res.result;\r\n                    }\r\n                });\r\n            } else {\r\n                this.initDepartmentData();\r\n            }\r\n        },\r\n        selectTree(v) {\r\n            let ids = [],\r\n                title = \"\";\r\n            v.forEach(e => {\r\n                ids.push(e.id);\r\n                if (title == \"\") {\r\n                    title = e.title;\r\n                } else {\r\n                    title = title + \"、\" + e.title;\r\n                }\r\n            });\r\n            this.departmentId = ids;\r\n            this.departmentTitle = title;\r\n            if (this.multiple) {\r\n                this.$emit(\"on-change\", this.departmentId);\r\n            } else {\r\n                this.$emit(\"on-change\", this.departmentId[0]);\r\n            }\r\n        },\r\n        clearSelect() {\r\n            this.departmentId = [];\r\n            this.departmentTitle = \"\";\r\n            this.initDepartmentData();\r\n            if (this.multiple) {\r\n                this.$emit(\"on-change\", []);\r\n            } else {\r\n                this.$emit(\"on-change\", \"\");\r\n            }\r\n            this.$emit(\"on-clear\");\r\n        },\r\n        setData(ids, title) {\r\n            this.departmentTitle = title;\r\n            if (this.multiple) {\r\n                this.departmentId = ids;\r\n            } else {\r\n                this.departmentId = [];\r\n                this.departmentId.push(ids);\r\n            }\r\n            this.$emit(\"on-change\", this.departmentId);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initDepartmentData();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.dep-tree-bar {\r\n    position: relative;\r\n    min-height: 80px;\r\n    max-height: 500px;\r\n    overflow: auto;\r\n    margin-top: 5px;\r\n}\r\n\r\n.dep-tree-bar::-webkit-scrollbar {\r\n    width: 6px;\r\n    height: 6px;\r\n}\r\n\r\n.dep-tree-bar::-webkit-scrollbar-thumb {\r\n    border-radius: 4px;\r\n    -webkit-box-shadow: inset 0 0 2px #d1d1d1;\r\n    background: #e4e4e4;\r\n}\r\n</style>\r\n"]}]}