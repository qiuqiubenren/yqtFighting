{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\template\\department-tree-choose.vue?vue&type=style&index=0&id=3a78bb36&lang=less","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\template\\department-tree-choose.vue","mtime":1743403543327},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1739857216827},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1739857212421},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":1739857212963},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\less-loader\\dist\\cjs.js","mtime":1739857239884},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmRlcC10cmVlLWJhciB7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIG1pbi1oZWlnaHQ6IDgwcHg7DQogICAgbWF4LWhlaWdodDogNTAwcHg7DQogICAgb3ZlcmZsb3c6IGF1dG87DQogICAgbWFyZ2luLXRvcDogNXB4Ow0KfQ0KDQouZGVwLXRyZWUtYmFyOjotd2Via2l0LXNjcm9sbGJhciB7DQogICAgd2lkdGg6IDZweDsNCiAgICBoZWlnaHQ6IDZweDsNCn0NCg0KLmRlcC10cmVlLWJhcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgew0KICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDAgMCAycHggI2QxZDFkMTsNCiAgICBiYWNrZ3JvdW5kOiAjZTRlNGU0Ow0KfQ0K"},{"version":3,"sources":["department-tree-choose.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"department-tree-choose.vue","sourceRoot":"src/views/template","sourcesContent":["<template>\r\n<div>\r\n    <div style=\"display:flex;\">\r\n        <Input v-model=\"departmentTitle\" readonly style=\"margin-right:10px;\" :placeholder=\"placeholder\" :clearable=\"clearable\" @on-clear=\"clearSelect\" />\r\n        <Poptip transfer trigger=\"click\" placement=\"right\" title=\"选择部门\" width=\"250\">\r\n            <Button icon=\"md-list\">选择部门</Button>\r\n            <div slot=\"content\">\r\n                <Input v-model=\"searchKey\" suffix=\"ios-search\" @on-change=\"searchDep\" placeholder=\"输入部门名搜索\" clearable />\r\n                <div class=\"dep-tree-bar\">\r\n                    <Tree :data=\"dataDep\" :load-data=\"loadData\" @on-select-change=\"selectTree\" :multiple=\"multiple\"></Tree>\r\n                    <Spin size=\"large\" fix v-if=\"depLoading\"></Spin>\r\n                </div>\r\n            </div>\r\n        </Poptip>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    initDepartment,\r\n    loadDepartment,\r\n    searchDepartment\r\n} from \"@/api/index\";\r\nexport default {\r\n    name: \"departmentTreeChoose\",\r\n    props: {\r\n        multiple: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        clearable: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        placeholder: {\r\n            type: String,\r\n            default: \"点击选择部门\"\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            depLoading: false,\r\n            departmentTitle: \"\",\r\n            searchKey: \"\",\r\n            dataDep: [],\r\n            selectDep: [],\r\n            departmentId: []\r\n        };\r\n    },\r\n    methods: {\r\n        initDepartmentData() {\r\n            initDepartment().then(res => {\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.title = \"[已禁用] \" + e.title;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    this.dataDep = res.result;\r\n                }\r\n            });\r\n        },\r\n        loadData(item, callback) {\r\n            loadDepartment(item.id).then(res => {\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.title = \"[已禁用] \" + e.title;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    callback(res.result);\r\n                }\r\n            });\r\n        },\r\n        searchDep() {\r\n            // 搜索部门\r\n            if (this.searchKey) {\r\n                this.depLoading = true;\r\n                searchDepartment({\r\n                    title: this.searchKey\r\n                }).then(res => {\r\n                    this.depLoading = false;\r\n                    if (res.success) {\r\n                        res.result.forEach(function (e) {\r\n                            if (e.status == -1) {\r\n                                e.title = \"[已禁用] \" + e.title;\r\n                                e.disabled = true;\r\n                            }\r\n                        });\r\n                        this.dataDep = res.result;\r\n                    }\r\n                });\r\n            } else {\r\n                this.initDepartmentData();\r\n            }\r\n        },\r\n        selectTree(v) {\r\n            let ids = [],\r\n                title = \"\";\r\n            v.forEach(e => {\r\n                ids.push(e.id);\r\n                if (title == \"\") {\r\n                    title = e.title;\r\n                } else {\r\n                    title = title + \"、\" + e.title;\r\n                }\r\n            });\r\n            this.departmentId = ids;\r\n            this.departmentTitle = title;\r\n            if (this.multiple) {\r\n                this.$emit(\"on-change\", this.departmentId);\r\n            } else {\r\n                this.$emit(\"on-change\", this.departmentId[0]);\r\n            }\r\n        },\r\n        clearSelect() {\r\n            this.departmentId = [];\r\n            this.departmentTitle = \"\";\r\n            this.initDepartmentData();\r\n            if (this.multiple) {\r\n                this.$emit(\"on-change\", []);\r\n            } else {\r\n                this.$emit(\"on-change\", \"\");\r\n            }\r\n            this.$emit(\"on-clear\");\r\n        },\r\n        setData(ids, title) {\r\n            this.departmentTitle = title;\r\n            if (this.multiple) {\r\n                this.departmentId = ids;\r\n            } else {\r\n                this.departmentId = [];\r\n                this.departmentId.push(ids);\r\n            }\r\n            this.$emit(\"on-change\", this.departmentId);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initDepartmentData();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.dep-tree-bar {\r\n    position: relative;\r\n    min-height: 80px;\r\n    max-height: 500px;\r\n    overflow: auto;\r\n    margin-top: 5px;\r\n}\r\n\r\n.dep-tree-bar::-webkit-scrollbar {\r\n    width: 6px;\r\n    height: 6px;\r\n}\r\n\r\n.dep-tree-bar::-webkit-scrollbar-thumb {\r\n    border-radius: 4px;\r\n    -webkit-box-shadow: inset 0 0 2px #d1d1d1;\r\n    background: #e4e4e4;\r\n}\r\n</style>\r\n"]}]}