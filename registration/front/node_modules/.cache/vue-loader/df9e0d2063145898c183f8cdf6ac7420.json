{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\roster\\user\\addEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\roster\\user\\addEdit.vue","mtime":1743403543390},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739857230815},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICAgIGdldEFsbFJvbGVMaXN0LA0KICAgIGFkZFVzZXIsDQogICAgZWRpdFVzZXINCn0gZnJvbSAiLi9hcGkuanMiOw0KaW1wb3J0IHsNCiAgICB2YWxpZGF0ZVVzZXJuYW1lLA0KICAgIHZhbGlkYXRlTW9iaWxlLA0KICAgIHZhbGlkYXRlUGFzc3dvcmQNCn0gZnJvbSAiQC9saWJzL3ZhbGlkYXRlIjsNCmltcG9ydCBkZXBhcnRtZW50VHJlZUNob29zZSBmcm9tICJAL3ZpZXdzL3RlbXBsYXRlL2RlcGFydG1lbnQtdHJlZS1jaG9vc2UiOw0KaW1wb3J0IHVwbG9hZFBpY0lucHV0IGZyb20gIkAvdmlld3MvdGVtcGxhdGUvdXBsb2FkLXBpYy1pbnB1dCI7DQppbXBvcnQgU2V0UGFzc3dvcmQgZnJvbSAiQC92aWV3cy90ZW1wbGF0ZS9zZXQtcGFzc3dvcmQiOw0KaW1wb3J0IGRpY3QgZnJvbSAiQC92aWV3cy90ZW1wbGF0ZS9kaWN0IjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAidXNlciIsDQogICAgY29tcG9uZW50czogew0KICAgICAgICBkZXBhcnRtZW50VHJlZUNob29zZSwNCiAgICAgICAgdXBsb2FkUGljSW5wdXQsDQogICAgICAgIFNldFBhc3N3b3JkLA0KICAgICAgICBkaWN0DQogICAgfSwNCiAgICBwcm9wczogew0KICAgICAgICB2YWx1ZTogew0KICAgICAgICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgICAgIH0sDQogICAgICAgIGRhdGE6IHsNCiAgICAgICAgICAgIHR5cGU6IE9iamVjdA0KICAgICAgICB9LA0KICAgICAgICB0eXBlOiB7DQogICAgICAgICAgICB0eXBlOiBTdHJpbmcsDQogICAgICAgICAgICBkZWZhdWx0OiAiMCINCiAgICAgICAgfQ0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHZpc2libGU6IHRoaXMudmFsdWUsDQogICAgICAgICAgICB0aXRsZTogIiIsDQogICAgICAgICAgICBwYXNzQ29sb3I6ICIiLA0KICAgICAgICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UsDQogICAgICAgICAgICBmb3JtOiB7DQogICAgICAgICAgICAgICAgYWRkcmVzc0FycmF5OiBbXQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGZvcm1WYWxpZGF0ZTogew0KICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBbew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl55m75b2V6LSm5Y+3IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlVXNlcm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgbmlja25hbWU6IFt7DQogICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl55So5oi35ZCNIiwNCiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiDQogICAgICAgICAgICAgICAgfV0sDQogICAgICAgICAgICAgICAgbW9iaWxlOiBbew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5omL5py65Y+3IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlTW9iaWxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBbew0KICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5a+G56CBIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIg0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzc3dvcmQsDQogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgZW1haWw6IFt7DQogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXpgq7nrrHlnLDlnYAiDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlbWFpbCIsDQogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi6YKu566x5qC85byP5LiN5q2j56GuIg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHJvbGVMaXN0OiBbXQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBpbml0KCkgew0KICAgICAgICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpOw0KICAgICAgICB9LA0KICAgICAgICBnZXRSb2xlTGlzdCgpIHsNCiAgICAgICAgICAgIGdldEFsbFJvbGVMaXN0KCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJvbGVMaXN0ID0gcmVzLnJlc3VsdDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgaGFuZGxlU2VsZWN0RGVwVHJlZSh2KSB7DQogICAgICAgICAgICB0aGlzLmZvcm0uZGVwYXJ0bWVudElkID0gdjsNCiAgICAgICAgfSwNCiAgICAgICAgY2hhbmdlQWRkcmVzcyh2KSB7DQogICAgICAgICAgICB0aGlzLmZvcm0uYWRkcmVzcyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybS5hZGRyZXNzQXJyYXkpOw0KICAgICAgICB9LA0KICAgICAgICBjaGFuZ2VQYXNzKHYsIGdyYWRlLCBzdHJlbmd0aCkgew0KICAgICAgICAgICAgdGhpcy5mb3JtLnBhc3NTdHJlbmd0aCA9IHN0cmVuZ3RoOw0KICAgICAgICB9LA0KICAgICAgICBzdWJtaXQoKSB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09ICIxIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRVc2VyKHRoaXMuZm9ybSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJvbi1zdWJtaXQiLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgYWRkVXNlcih0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgib24tc3VibWl0IiwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIHNldEN1cnJlbnRWYWx1ZSh2YWx1ZSkgew0KICAgICAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzLnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy50eXBlID09ICIxIikgew0KICAgICAgICAgICAgICAgIHRoaXMudGl0bGUgPSAi57yW6L6RIjsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09ICIyIikgew0KICAgICAgICAgICAgICAgIHRoaXMudGl0bGUgPSAi5re75YqgIjsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy50aXRsZSA9ICLor6bmg4UiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0RmllbGRzKCk7DQogICAgICAgICAgICBpZiAodGhpcy50eXBlID09ICIwIiB8fCB0aGlzLnR5cGUgPT0gIjEiKSB7DQogICAgICAgICAgICAgICAgLy8g5Zue5pi+5pWw5o2uDQogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmRhdGE7DQogICAgICAgICAgICAgICAgLy8g5Zyw5Z2ADQogICAgICAgICAgICAgICAgaWYgKGRhdGEuYWRkcmVzcykgew0KICAgICAgICAgICAgICAgICAgICBkYXRhLmFkZHJlc3NBcnJheSA9IEpTT04ucGFyc2UoZGF0YS5hZGRyZXNzKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBkYXRhLmFkZHJlc3NBcnJheSA9IFtdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyDpg6jpl6gNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmRlcFRyZWUuc2V0RGF0YShkYXRhLmRlcGFydG1lbnRJZCwgZGF0YS5kZXBhcnRtZW50VGl0bGUpOw0KICAgICAgICAgICAgICAgIC8vIOinkuiJsg0KICAgICAgICAgICAgICAgIGxldCBzZWxlY3RSb2xlc0lkID0gW107DQogICAgICAgICAgICAgICAgZGF0YS5yb2xlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICAgICAgICAgIHNlbGVjdFJvbGVzSWQucHVzaChlLmlkKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBkYXRhLnJvbGVJZHMgPSBzZWxlY3RSb2xlc0lkOw0KICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhLnJvbGVzOw0KICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhLnBlcm1pc3Npb25zOw0KICAgICAgICAgICAgICAgIC8vIOWvhueggeW8uuW6pg0KICAgICAgICAgICAgICAgIGlmIChkYXRhLnBhc3NTdHJlbmd0aCA9PSAi5byxIikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3NDb2xvciA9ICIjZWQzZjE0IjsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEucGFzc1N0cmVuZ3RoID09ICLkuK0iKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc0NvbG9yID0gIiNmYWFkMTQiOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5wYXNzU3RyZW5ndGggPT0gIuW8uiIpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzQ29sb3IgPSAiIzUyYzQxYSI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIOWbnuaYvg0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybSA9IGRhdGE7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIOa3u+WKoA0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZGVwVHJlZS5zZXREYXRhKCIiLCAiIik7DQogICAgICAgICAgICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAwLA0KICAgICAgICAgICAgICAgICAgICBzZXg6ICIiLA0KICAgICAgICAgICAgICAgICAgICBhZGRyZXNzQXJyYXk6IFtdDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHZhbHVlOw0KICAgICAgICB9DQogICAgfSwNCiAgICB3YXRjaDogew0KICAgICAgICB2YWx1ZSh2YWwpIHsNCiAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHZhbCk7DQogICAgICAgIH0sDQogICAgICAgIHZpc2libGUodmFsdWUpIHsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdmFsdWUpOw0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLmluaXQoKTsNCiAgICB9DQp9Ow0K"},{"version":3,"sources":["addEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addEdit.vue","sourceRoot":"src/views/roster/user","sourcesContent":["<template>\r\n<div class=\"user-edit\">\r\n    <Modal :title=\"title\" v-model=\"visible\" width=\"90\" draggable :mask-closable=\"type=='0'\" ok-text=\"确认提交\" @on-ok=\"submit\">\r\n\r\n        <Row :gutter=\"16\" justify=\"center\">\r\n            <div class=\"info-title\"><span v-show=\"type!='2'\">登陆账号{{form.username}}（唯一标识{{form.id}}） </span>\r\n                <Icon v-show=\"form.status==-1\" type=\"md-lock\" size=\"18\" style=\"margin-left:10px;cursor:pointer\" />\r\n            </div>\r\n        </Row>\r\n        <Form ref=\"form\" :model=\"form\" :rules=\"formValidate\" label-position=\"top\">\r\n            <Row :gutter=\"16\" v-if=\"type=='2'\">\r\n                <Col span=\"12\">\r\n                <FormItem label=\"登录账号\" prop=\"username\" style=\"width:100%\">\r\n                    <Input v-model=\"form.username\" autocomplete=\"off\" :maxlength=\"16\" />\r\n                </FormItem>\r\n                </Col>\r\n                <Col span=\"12\">\r\n                <FormItem label=\"密码\" prop=\"password\" style=\"width:100%\">\r\n                    <SetPassword v-model=\"form.password\" @on-change=\"changePass\" />\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n            <Row :gutter=\"16\">\r\n                <Col span=\"12\">\r\n                <FormItem label=\"用户名\" prop=\"nickname\" style=\"width:100%\">\r\n                    <Input v-model=\"form.nickname\" />\r\n                </FormItem>\r\n                </Col>\r\n                <Col span=\"12\">\r\n                <FormItem label=\"邮箱\" prop=\"email\" style=\"width:100%\">\r\n                    <Input v-model=\"form.email\" />\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n            <Row :gutter=\"16\">\r\n                <Col span=\"12\">\r\n                <FormItem label=\"手机号\" prop=\"mobile\" style=\"width:100%\">\r\n                    <Input v-model=\"form.mobile\" />\r\n                </FormItem>\r\n                </Col>\r\n                <Col span=\"12\">\r\n                <FormItem label=\"性别\" style=\"width:100%\">\r\n                    <dict dict=\"sex\" v-model=\"form.sex\" transfer clearable placeholder=\"选择性别\" />\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n            <Row :gutter=\"16\">\r\n                <Col span=\"12\">\r\n                <FormItem label=\"所属部门\" style=\"width:100%\">\r\n                    <department-tree-choose @on-change=\"handleSelectDepTree\" ref=\"depTree\"></department-tree-choose>\r\n                </FormItem>\r\n                </Col>\r\n                <Col span=\"12\">\r\n                <FormItem label=\"用户类型\" style=\"width:100%\">\r\n                    <Select v-model=\"form.type\" placeholder=\"请选择用户类型\">\r\n                        <Option :value=\"0\">普通用户</Option>\r\n                        <Option :value=\"1\">管理员</Option>\r\n                    </Select>\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n            <Row :gutter=\"16\">\r\n                <Col span=\"12\">\r\n                <FormItem label=\"头像\" style=\"width:100%\">\r\n                    <upload-pic-input v-model=\"form.avatar\"></upload-pic-input>\r\n                </FormItem>\r\n                </Col>\r\n                <Col span=\"12\">\r\n                <FormItem label=\"角色\" prop=\"roleIds\" style=\"width:100%\">\r\n                    <Select v-model=\"form.roleIds\" multiple>\r\n                        <Option v-for=\"item in roleList\" :value=\"item.id\" :key=\"item.id\" :label=\"item.name\">\r\n                            <span style=\"margin-right:10px;\">{{ item.name }}</span>\r\n                            <span style=\"color:#ccc;\">{{ item.description }}</span>\r\n                        </Option>\r\n                    </Select>\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n            <Row :gutter=\"16\">\r\n                <Col span=\"12\">\r\n                <FormItem label=\"区县\" prop=\"addressArray\" style=\"width:100%\">\r\n                    <al-cascader v-model=\"form.addressArray\" @on-change=\"changeAddress\" data-type=\"code\" level=\"2\" />\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n        </Form>\r\n    </Modal>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getAllRoleList,\r\n    addUser,\r\n    editUser\r\n} from \"./api.js\";\r\nimport {\r\n    validateUsername,\r\n    validateMobile,\r\n    validatePassword\r\n} from \"@/libs/validate\";\r\nimport departmentTreeChoose from \"@/views/template/department-tree-choose\";\r\nimport uploadPicInput from \"@/views/template/upload-pic-input\";\r\nimport SetPassword from \"@/views/template/set-password\";\r\nimport dict from \"@/views/template/dict\";\r\nexport default {\r\n    name: \"user\",\r\n    components: {\r\n        departmentTreeChoose,\r\n        uploadPicInput,\r\n        SetPassword,\r\n        dict\r\n    },\r\n    props: {\r\n        value: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        data: {\r\n            type: Object\r\n        },\r\n        type: {\r\n            type: String,\r\n            default: \"0\"\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            visible: this.value,\r\n            title: \"\",\r\n            passColor: \"\",\r\n            submitLoading: false,\r\n            form: {\r\n                addressArray: []\r\n            },\r\n            formValidate: {\r\n                username: [{\r\n                        required: true,\r\n                        message: \"请输入登录账号\",\r\n                        trigger: \"blur\"\r\n                    },\r\n                    {\r\n                        validator: validateUsername,\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                nickname: [{\r\n                    required: true,\r\n                    message: \"请输入用户名\",\r\n                    trigger: \"blur\"\r\n                }],\r\n                mobile: [{\r\n                        required: true,\r\n                        message: \"请输入手机号\",\r\n                        trigger: \"blur\"\r\n                    },\r\n                    {\r\n                        validator: validateMobile,\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                password: [{\r\n                        required: true,\r\n                        message: \"请输入密码\",\r\n                        trigger: \"blur\"\r\n                    },\r\n                    {\r\n                        validator: validatePassword,\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                email: [{\r\n                        required: true,\r\n                        message: \"请输入邮箱地址\"\r\n                    },\r\n                    {\r\n                        type: \"email\",\r\n                        message: \"邮箱格式不正确\"\r\n                    }\r\n                ]\r\n            },\r\n            roleList: []\r\n        };\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.getRoleList();\r\n        },\r\n        getRoleList() {\r\n            getAllRoleList().then(res => {\r\n                if (res.success) {\r\n                    this.roleList = res.result;\r\n                }\r\n            });\r\n        },\r\n        handleSelectDepTree(v) {\r\n            this.form.departmentId = v;\r\n        },\r\n        changeAddress(v) {\r\n            this.form.address = JSON.stringify(this.form.addressArray);\r\n        },\r\n        changePass(v, grade, strength) {\r\n            this.form.passStrength = strength;\r\n        },\r\n        submit() {\r\n            this.$refs.form.validate(valid => {\r\n                if (valid) {\r\n                    if (this.type == \"1\") {\r\n                        this.submitLoading = true;\r\n                        editUser(this.form).then(res => {\r\n                            this.submitLoading = false;\r\n                            if (res.success) {\r\n                                this.$Message.success(\"操作成功\");\r\n                                this.$emit(\"on-submit\", true);\r\n                                this.visible = false;\r\n                            }\r\n                        });\r\n                    } else {\r\n                        this.submitLoading = true;\r\n                        addUser(this.form).then(res => {\r\n                            this.submitLoading = false;\r\n                            if (res.success) {\r\n                                this.$Message.success(\"操作成功\");\r\n                                this.$emit(\"on-submit\", true);\r\n                                this.visible = false;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        setCurrentValue(value) {\r\n            if (value === this.visible) {\r\n                return;\r\n            }\r\n            if (this.type == \"1\") {\r\n                this.title = \"编辑\";\r\n            } else if (this.type == \"2\") {\r\n                this.title = \"添加\";\r\n            } else {\r\n                this.title = \"详情\";\r\n            }\r\n            this.$refs.form.resetFields();\r\n            if (this.type == \"0\" || this.type == \"1\") {\r\n                // 回显数据\r\n                let data = this.data;\r\n                // 地址\r\n                if (data.address) {\r\n                    data.addressArray = JSON.parse(data.address);\r\n                } else {\r\n                    data.addressArray = [];\r\n                }\r\n                // 部门\r\n                this.$refs.depTree.setData(data.departmentId, data.departmentTitle);\r\n                // 角色\r\n                let selectRolesId = [];\r\n                data.roles.forEach(function (e) {\r\n                    selectRolesId.push(e.id);\r\n                });\r\n                data.roleIds = selectRolesId;\r\n                delete data.roles;\r\n                delete data.permissions;\r\n                // 密码强度\r\n                if (data.passStrength == \"弱\") {\r\n                    this.passColor = \"#ed3f14\";\r\n                } else if (data.passStrength == \"中\") {\r\n                    this.passColor = \"#faad14\";\r\n                } else if (data.passStrength == \"强\") {\r\n                    this.passColor = \"#52c41a\";\r\n                }\r\n                // 回显\r\n                this.form = data;\r\n            } else {\r\n                // 添加\r\n                this.$refs.depTree.setData(\"\", \"\");\r\n                this.form = {\r\n                    type: 0,\r\n                    sex: \"\",\r\n                    addressArray: []\r\n                };\r\n            }\r\n            this.visible = value;\r\n        }\r\n    },\r\n    watch: {\r\n        value(val) {\r\n            this.setCurrentValue(val);\r\n        },\r\n        visible(value) {\r\n            this.$emit(\"input\", value);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\r\n</style>\r\n"]}]}