{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\template\\department-tree-choose.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\template\\department-tree-choose.vue","mtime":1743403543327},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739857230815},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGluaXREZXBhcnRtZW50LCBsb2FkRGVwYXJ0bWVudCwgc2VhcmNoRGVwYXJ0bWVudCB9IGZyb20gIkAvYXBpL2luZGV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJkZXBhcnRtZW50VHJlZUNob29zZSIsCiAgcHJvcHM6IHsKICAgIG11bHRpcGxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgY2xlYXJhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICLngrnlh7vpgInmi6npg6jpl6giCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVwTG9hZGluZzogZmFsc2UsCiAgICAgIGRlcGFydG1lbnRUaXRsZTogIiIsCiAgICAgIHNlYXJjaEtleTogIiIsCiAgICAgIGRhdGFEZXA6IFtdLAogICAgICBzZWxlY3REZXA6IFtdLAogICAgICBkZXBhcnRtZW50SWQ6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdERlcGFydG1lbnREYXRhKCkgewogICAgICBpbml0RGVwYXJ0bWVudCgpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoZS5pc1BhcmVudCkgewogICAgICAgICAgICAgIGUubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIGUuY2hpbGRyZW4gPSBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZS5zdGF0dXMgPT0gLTEpIHsKICAgICAgICAgICAgICBlLnRpdGxlID0gIlvlt7LnpoHnlKhdICIgKyBlLnRpdGxlOwogICAgICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZGF0YURlcCA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2FkRGF0YShpdGVtLCBjYWxsYmFjaykgewogICAgICBsb2FkRGVwYXJ0bWVudChpdGVtLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICByZXMucmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUuaXNQYXJlbnQpIHsKICAgICAgICAgICAgICBlLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBlLmNoaWxkcmVuID0gW107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGUuc3RhdHVzID09IC0xKSB7CiAgICAgICAgICAgICAgZS50aXRsZSA9ICJb5bey56aB55SoXSAiICsgZS50aXRsZTsKICAgICAgICAgICAgICBlLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBjYWxsYmFjayhyZXMucmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaERlcCgpIHsKICAgICAgLy8g5pCc57Si6YOo6ZeoCiAgICAgIGlmICh0aGlzLnNlYXJjaEtleSkgewogICAgICAgIHRoaXMuZGVwTG9hZGluZyA9IHRydWU7CiAgICAgICAgc2VhcmNoRGVwYXJ0bWVudCh7CiAgICAgICAgICB0aXRsZTogdGhpcy5zZWFyY2hLZXkKICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLmRlcExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICByZXMucmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBpZiAoZS5zdGF0dXMgPT0gLTEpIHsKICAgICAgICAgICAgICAgIGUudGl0bGUgPSAiW+W3suemgeeUqF0gIiArIGUudGl0bGU7CiAgICAgICAgICAgICAgICBlLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmRhdGFEZXAgPSByZXMucmVzdWx0OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW5pdERlcGFydG1lbnREYXRhKCk7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RUcmVlKHYpIHsKICAgICAgbGV0IGlkcyA9IFtdLAogICAgICAgIHRpdGxlID0gIiI7CiAgICAgIHYuZm9yRWFjaChlID0+IHsKICAgICAgICBpZHMucHVzaChlLmlkKTsKICAgICAgICBpZiAodGl0bGUgPT0gIiIpIHsKICAgICAgICAgIHRpdGxlID0gZS50aXRsZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGl0bGUgPSB0aXRsZSArICLjgIEiICsgZS50aXRsZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmRlcGFydG1lbnRJZCA9IGlkczsKICAgICAgdGhpcy5kZXBhcnRtZW50VGl0bGUgPSB0aXRsZTsKICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHsKICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmRlcGFydG1lbnRJZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5kZXBhcnRtZW50SWRbMF0pOwogICAgICB9CiAgICB9LAogICAgY2xlYXJTZWxlY3QoKSB7CiAgICAgIHRoaXMuZGVwYXJ0bWVudElkID0gW107CiAgICAgIHRoaXMuZGVwYXJ0bWVudFRpdGxlID0gIiI7CiAgICAgIHRoaXMuaW5pdERlcGFydG1lbnREYXRhKCk7CiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7CiAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgW10pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsICIiKTsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCJvbi1jbGVhciIpOwogICAgfSwKICAgIHNldERhdGEoaWRzLCB0aXRsZSkgewogICAgICB0aGlzLmRlcGFydG1lbnRUaXRsZSA9IHRpdGxlOwogICAgICBpZiAodGhpcy5tdWx0aXBsZSkgewogICAgICAgIHRoaXMuZGVwYXJ0bWVudElkID0gaWRzOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGVwYXJ0bWVudElkID0gW107CiAgICAgICAgdGhpcy5kZXBhcnRtZW50SWQucHVzaChpZHMpOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHRoaXMuZGVwYXJ0bWVudElkKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXREZXBhcnRtZW50RGF0YSgpOwogIH0KfTs="},{"version":3,"names":["initDepartment","loadDepartment","searchDepartment","name","props","multiple","type","Boolean","default","clearable","placeholder","String","data","depLoading","departmentTitle","searchKey","dataDep","selectDep","departmentId","methods","initDepartmentData","then","res","success","result","forEach","e","isParent","loading","children","status","title","disabled","loadData","item","callback","id","searchDep","selectTree","v","ids","push","$emit","clearSelect","setData","mounted"],"sources":["src/views/template/department-tree-choose.vue"],"sourcesContent":["<template>\r\n<div>\r\n    <div style=\"display:flex;\">\r\n        <Input v-model=\"departmentTitle\" readonly style=\"margin-right:10px;\" :placeholder=\"placeholder\" :clearable=\"clearable\" @on-clear=\"clearSelect\" />\r\n        <Poptip transfer trigger=\"click\" placement=\"right\" title=\"选择部门\" width=\"250\">\r\n            <Button icon=\"md-list\">选择部门</Button>\r\n            <div slot=\"content\">\r\n                <Input v-model=\"searchKey\" suffix=\"ios-search\" @on-change=\"searchDep\" placeholder=\"输入部门名搜索\" clearable />\r\n                <div class=\"dep-tree-bar\">\r\n                    <Tree :data=\"dataDep\" :load-data=\"loadData\" @on-select-change=\"selectTree\" :multiple=\"multiple\"></Tree>\r\n                    <Spin size=\"large\" fix v-if=\"depLoading\"></Spin>\r\n                </div>\r\n            </div>\r\n        </Poptip>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    initDepartment,\r\n    loadDepartment,\r\n    searchDepartment\r\n} from \"@/api/index\";\r\nexport default {\r\n    name: \"departmentTreeChoose\",\r\n    props: {\r\n        multiple: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        clearable: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        placeholder: {\r\n            type: String,\r\n            default: \"点击选择部门\"\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            depLoading: false,\r\n            departmentTitle: \"\",\r\n            searchKey: \"\",\r\n            dataDep: [],\r\n            selectDep: [],\r\n            departmentId: []\r\n        };\r\n    },\r\n    methods: {\r\n        initDepartmentData() {\r\n            initDepartment().then(res => {\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.title = \"[已禁用] \" + e.title;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    this.dataDep = res.result;\r\n                }\r\n            });\r\n        },\r\n        loadData(item, callback) {\r\n            loadDepartment(item.id).then(res => {\r\n                if (res.success) {\r\n                    res.result.forEach(function (e) {\r\n                        if (e.isParent) {\r\n                            e.loading = false;\r\n                            e.children = [];\r\n                        }\r\n                        if (e.status == -1) {\r\n                            e.title = \"[已禁用] \" + e.title;\r\n                            e.disabled = true;\r\n                        }\r\n                    });\r\n                    callback(res.result);\r\n                }\r\n            });\r\n        },\r\n        searchDep() {\r\n            // 搜索部门\r\n            if (this.searchKey) {\r\n                this.depLoading = true;\r\n                searchDepartment({\r\n                    title: this.searchKey\r\n                }).then(res => {\r\n                    this.depLoading = false;\r\n                    if (res.success) {\r\n                        res.result.forEach(function (e) {\r\n                            if (e.status == -1) {\r\n                                e.title = \"[已禁用] \" + e.title;\r\n                                e.disabled = true;\r\n                            }\r\n                        });\r\n                        this.dataDep = res.result;\r\n                    }\r\n                });\r\n            } else {\r\n                this.initDepartmentData();\r\n            }\r\n        },\r\n        selectTree(v) {\r\n            let ids = [],\r\n                title = \"\";\r\n            v.forEach(e => {\r\n                ids.push(e.id);\r\n                if (title == \"\") {\r\n                    title = e.title;\r\n                } else {\r\n                    title = title + \"、\" + e.title;\r\n                }\r\n            });\r\n            this.departmentId = ids;\r\n            this.departmentTitle = title;\r\n            if (this.multiple) {\r\n                this.$emit(\"on-change\", this.departmentId);\r\n            } else {\r\n                this.$emit(\"on-change\", this.departmentId[0]);\r\n            }\r\n        },\r\n        clearSelect() {\r\n            this.departmentId = [];\r\n            this.departmentTitle = \"\";\r\n            this.initDepartmentData();\r\n            if (this.multiple) {\r\n                this.$emit(\"on-change\", []);\r\n            } else {\r\n                this.$emit(\"on-change\", \"\");\r\n            }\r\n            this.$emit(\"on-clear\");\r\n        },\r\n        setData(ids, title) {\r\n            this.departmentTitle = title;\r\n            if (this.multiple) {\r\n                this.departmentId = ids;\r\n            } else {\r\n                this.departmentId = [];\r\n                this.departmentId.push(ids);\r\n            }\r\n            this.$emit(\"on-change\", this.departmentId);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.initDepartmentData();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.dep-tree-bar {\r\n    position: relative;\r\n    min-height: 80px;\r\n    max-height: 500px;\r\n    overflow: auto;\r\n    margin-top: 5px;\r\n}\r\n\r\n.dep-tree-bar::-webkit-scrollbar {\r\n    width: 6px;\r\n    height: 6px;\r\n}\r\n\r\n.dep-tree-bar::-webkit-scrollbar-thumb {\r\n    border-radius: 4px;\r\n    -webkit-box-shadow: inset 0 0 2px #d1d1d1;\r\n    background: #e4e4e4;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}