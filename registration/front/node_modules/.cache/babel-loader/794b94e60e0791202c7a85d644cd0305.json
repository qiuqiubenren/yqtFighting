{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\role\\role\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\role\\role\\index.vue","mtime":1743403543393},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739857230815},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFJvbGVMaXN0LCBnZXRBbGxQZXJtaXNzaW9uTGlzdCwgYWRkUm9sZSwgZWRpdFJvbGUsIGRlbGV0ZVJvbGUsIHNldERlZmF1bHRSb2xlLCBlZGl0Um9sZVBlcm0gfSBmcm9tICIuL2FwaS5qcyI7CmltcG9ydCB1dGlsIGZyb20gIkAvbGlicy91dGlsLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJyb2xlIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgdHJlZUxvYWRpbmc6IHRydWUsCiAgICAgIHN1Ym1pdFBlcm1Mb2FkaW5nOiBmYWxzZSwKICAgICAgbW9kYWxUeXBlOiAwLAogICAgICByb2xlTW9kYWxWaXNpYmxlOiBmYWxzZSwKICAgICAgcGVybU1vZGFsVmlzaWJsZTogZmFsc2UsCiAgICAgIG1vZGFsVGl0bGU6ICIiLAogICAgICByb2xlRm9ybTogewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGRlc2NyaXB0aW9uOiAiIgogICAgICB9LAogICAgICByb2xlRm9ybVZhbGlkYXRlOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuinkuiJsuWQjeensOS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZSwKICAgICAgY29sdW1uczogW3sKICAgICAgICB0eXBlOiAiaW5kZXgiLAogICAgICAgIHdpZHRoOiA2MCwKICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi6KeS6Imy5ZCN56ewIiwKICAgICAgICBrZXk6ICJuYW1lIiwKICAgICAgICBtaW5XaWR0aDogMTUwLAogICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuWkh+azqCIsCiAgICAgICAga2V5OiAiZGVzY3JpcHRpb24iLAogICAgICAgIG1pbldpZHRoOiAyNjAsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi5Yib5bu65pe26Ze0IiwKICAgICAgICBrZXk6ICJjcmVhdGVUaW1lIiwKICAgICAgICBtaW5XaWR0aDogMTcwLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHNvcnRUeXBlOiAiZGVzYyIKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi5Yib5bu65Lq6IiwKICAgICAgICBrZXk6ICJjcmVhdGVCeSIsCiAgICAgICAgbWluV2lkdGg6IDE3MCwKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICBzb3J0VHlwZTogImRlc2MiCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuabtOaWsOaXtumXtCIsCiAgICAgICAga2V5OiAidXBkYXRlVGltZSIsCiAgICAgICAgbWluV2lkdGg6IDE3MCwKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLmnIDlkI7mm7TmlrDkuroiLAogICAgICAgIGtleTogInVwZGF0ZUJ5IiwKICAgICAgICBtaW5XaWR0aDogMTcwLAogICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuaTjeS9nCIsCiAgICAgICAga2V5OiAiYWN0aW9uIiwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgZml4ZWQ6ICJyaWdodCIsCiAgICAgICAgd2lkdGg6IDM4MCwKICAgICAgICByZW5kZXI6IChoLCBwYXJhbXMpID0+IHsKICAgICAgICAgIHJldHVybiBoKCJkaXYiLCBbaCgiQnV0dG9uIiwgewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgICAgIGdob3N0OiB0cnVlLAogICAgICAgICAgICAgIHNoYXBlOiAiY2lyY2xlIiwKICAgICAgICAgICAgICBpY29uOiAiaW9zLWJydXNoIgogICAgICAgICAgICB9LAogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiAiNXB4IgogICAgICAgICAgICB9LAogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmVkaXRQZXJtKHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgIuiPnOWNleadg+mZkCIpLCBoKCJCdXR0b24iLCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgdHlwZTogcGFyYW1zLnJvdy5kZWZhdWx0Um9sZSA/ICJwcmltYXJ5IiA6ICJpbmZvIiwKICAgICAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgICAgIGdob3N0OiB0cnVlLAogICAgICAgICAgICAgIHNoYXBlOiAiY2lyY2xlIiwKICAgICAgICAgICAgICBpY29uOiAiaW9zLWJyb3dzZXJzIgogICAgICAgICAgICB9LAogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiAiNXB4IgogICAgICAgICAgICB9LAogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnJvdy5kZWZhdWx0Um9sZSkgewogICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbERlZmF1bHQocGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLnNldERlZmF1bHQocGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBwYXJhbXMucm93LmRlZmF1bHRSb2xlID8gIuWPlua2iOm7mOiupCIgOiAi6K6+5Li66buY6K6kIiksIGgoIkJ1dHRvbiIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgICAgICBnaG9zdDogdHJ1ZSwKICAgICAgICAgICAgICBzaGFwZTogImNpcmNsZSIsCiAgICAgICAgICAgICAgaWNvbjogIm1kLWNvbG9yLXdhbmQiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6ICI1cHgiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuZWRpdChwYXJhbXMucm93KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICLnvJbovpEiKSwgaCgiQnV0dG9uIiwgewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgICAgICBnaG9zdDogdHJ1ZSwKICAgICAgICAgICAgICBzaGFwZTogImNpcmNsZSIsCiAgICAgICAgICAgICAgaWNvbjogImlvcy11bmRvIgogICAgICAgICAgICB9LAogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShwYXJhbXMucm93KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICLliKDpmaQiKV0pOwogICAgICAgIH0KICAgICAgfV0sCiAgICAgIGRhdGE6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgcGVybURhdGE6IFtdLAogICAgICBlZGl0Um9sZVBlcm1JZDogIiIsCiAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICAvLyDmkJzntKLmoYbliJ3lp4vljJblr7nosaEKICAgICAgICBwYWdlTnVtYmVyOiAxLAogICAgICAgIC8vIOW9k+WJjemhteaVsAogICAgICAgIHBhZ2VTaXplOiAxNSwKICAgICAgICAvLyDpobXpnaLlpKflsI8KICAgICAgICBzb3J0OiAiY3JlYXRlVGltZSIsCiAgICAgICAgLy8g6buY6K6k5o6S5bqP5a2X5q61CiAgICAgICAgb3JkZXI6ICJkZXNjIiAvLyDpu5jorqTmjpLluo/mlrnlvI8KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuZ2V0Um9sZUxpc3QoKTsKICAgICAgdGhpcy5nZXRQZXJtTGlzdCgpOwogICAgfSwKICAgIHJlbmRlckNvbnRlbnQoaCwgewogICAgICByb290LAogICAgICBub2RlLAogICAgICBkYXRhCiAgICB9KSB7CiAgICAgIGxldCBpY29uID0gIiI7CiAgICAgIGlmIChkYXRhLmxldmVsID09IDApIHsKICAgICAgICBpY29uID0gImlvcy1uYXZpZ2F0ZSI7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5sZXZlbCA9PSAxKSB7CiAgICAgICAgaWNvbiA9ICJtZC1saXN0LWJveCI7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5sZXZlbCA9PSAyKSB7CiAgICAgICAgaWNvbiA9ICJtZC1saXN0IjsKICAgICAgfSBlbHNlIGlmIChkYXRhLmxldmVsID09IDMpIHsKICAgICAgICBpY29uID0gIm1kLXJhZGlvLWJ1dHRvbi1vbiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWNvbiA9ICJtZC1yYWRpby1idXR0b24tb2ZmIjsKICAgICAgfQogICAgICByZXR1cm4gaCgic3BhbiIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgZGlzcGxheTogImlubGluZS1ibG9jayIsCiAgICAgICAgICBjdXJzb3I6ICJwb2ludGVyIgogICAgICAgIH0sCiAgICAgICAgb246IHsKICAgICAgICAgIGNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgIGRhdGEuY2hlY2tlZCA9ICFkYXRhLmNoZWNrZWQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBbaCgic3BhbiIsIFtoKCJJY29uIiwgewogICAgICAgIHByb3BzOiB7CiAgICAgICAgICB0eXBlOiBpY29uLAogICAgICAgICAgc2l6ZTogIjE2IgogICAgICAgIH0sCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICJtYXJnaW4tcmlnaHQiOiAiOHB4IiwKICAgICAgICAgICJtYXJnaW4tYm90dG9tIjogIjNweCIKICAgICAgICB9CiAgICAgIH0pLCBoKCJzcGFuIiwgZGF0YS50aXRsZSldKV0pOwogICAgfSwKICAgIGNoYW5nZVBhZ2UodikgewogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IHY7CiAgICAgIHRoaXMuZ2V0Um9sZUxpc3QoKTsKICAgIH0sCiAgICBjaGFuZ2VQYWdlU2l6ZSh2KSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IHY7CiAgICAgIHRoaXMuZ2V0Um9sZUxpc3QoKTsKICAgIH0sCiAgICBjaGFuZ2VTb3J0KGUpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtLnNvcnQgPSBlLmtleTsKICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyID0gZS5vcmRlcjsKICAgICAgaWYgKGUub3JkZXIgPT09ICJub3JtYWwiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyID0gIiI7CiAgICAgIH0KICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpOwogICAgfSwKICAgIGdldFJvbGVMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBnZXRSb2xlTGlzdCh0aGlzLnNlYXJjaEZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuZGF0YSA9IHJlcy5yZXN1bHQucmVjb3JkczsKICAgICAgICAgIHRoaXMudG90YWwgPSByZXMucmVzdWx0LnRvdGFsOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0UGVybUxpc3QoKSB7CiAgICAgIHRoaXMudHJlZUxvYWRpbmcgPSB0cnVlOwogICAgICBnZXRBbGxQZXJtaXNzaW9uTGlzdCgpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuZGVsZXRlRGlzYWJsZU5vZGUocmVzLnJlc3VsdCk7CiAgICAgICAgICB0aGlzLnBlcm1EYXRhID0gcmVzLnJlc3VsdDsKICAgICAgICAgIHRoaXMudHJlZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhpcy50cmVlTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDpgJLlvZLmoIforrDnpoHnlKjoioLngrkKICAgIGRlbGV0ZURpc2FibGVOb2RlKHBlcm1EYXRhKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgcGVybURhdGEuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChlLnN0YXR1cyA9PSAtMSkgewogICAgICAgICAgZS50aXRsZSA9ICJb5bey56aB55SoXSAiICsgZS50aXRsZTsKICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoZS5jaGlsZHJlbiAmJiBlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoYXQuZGVsZXRlRGlzYWJsZU5vZGUoZS5jaGlsZHJlbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxSb2xlKCkgewogICAgICB0aGlzLnJvbGVNb2RhbFZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBzdWJtaXRSb2xlKCkgewogICAgICB0aGlzLiRyZWZzLnJvbGVGb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICh0aGlzLm1vZGFsVHlwZSA9PSAwKSB7CiAgICAgICAgICAgIC8vIOa3u+WKoAogICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICBhZGRSb2xlKHRoaXMucm9sZUZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CiAgICAgICAgICAgICAgICB0aGlzLmdldFJvbGVMaXN0KCk7CiAgICAgICAgICAgICAgICB0aGlzLnJvbGVNb2RhbFZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgZGVsZXRlIHRoaXMucm9sZUZvcm0ucGVybWlzc2lvbnM7CiAgICAgICAgICAgIGVkaXRSb2xlKHRoaXMucm9sZUZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CiAgICAgICAgICAgICAgICB0aGlzLmdldFJvbGVMaXN0KCk7CiAgICAgICAgICAgICAgICB0aGlzLnJvbGVNb2RhbFZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWRkUm9sZUZ4KCkgewogICAgICB0aGlzLm1vZGFsVHlwZSA9IDA7CiAgICAgIHRoaXMubW9kYWxUaXRsZSA9ICLmt7vliqDop5LoibIiOwogICAgICB0aGlzLiRyZWZzLnJvbGVGb3JtLnJlc2V0RmllbGRzKCk7CiAgICAgIGRlbGV0ZSB0aGlzLnJvbGVGb3JtLmlkOwogICAgICB0aGlzLnJvbGVNb2RhbFZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGVkaXQodikgewogICAgICB0aGlzLm1vZGFsVHlwZSA9IDE7CiAgICAgIHRoaXMubW9kYWxUaXRsZSA9ICLnvJbovpHop5LoibIiOwogICAgICB0aGlzLiRyZWZzLnJvbGVGb3JtLnJlc2V0RmllbGRzKCk7CiAgICAgIGZvciAobGV0IGF0dHIgaW4gdikgewogICAgICAgIGlmICh2W2F0dHJdID09IG51bGwpIHsKICAgICAgICAgIHZbYXR0cl0gPSAiIjsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOwogICAgICBsZXQgcm9sZUluZm8gPSBKU09OLnBhcnNlKHN0cik7CiAgICAgIHRoaXMucm9sZUZvcm0gPSByb2xlSW5mbzsKICAgICAgdGhpcy5yb2xlTW9kYWxWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICByZW1vdmUodikgewogICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsKICAgICAgICB0aXRsZTogIuehruiupOWIoOmZpCIsCiAgICAgICAgY29udGVudDogIuaCqOehruiupOimgeWIoOmZpOinkuiJsiAiICsgdi5uYW1lICsgIiA/IiwKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIG9uT2s6ICgpID0+IHsKICAgICAgICAgIGRlbGV0ZVJvbGUoewogICAgICAgICAgICBpZHM6IHYuaWQKICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy4kTW9kYWwucmVtb3ZlKCk7CiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7CiAgICAgICAgICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNldERlZmF1bHQodikgewogICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsKICAgICAgICB0aXRsZTogIuehruiupOiuvue9riIsCiAgICAgICAgY29udGVudDogIuaCqOehruiupOimgeiuvue9ruaJgOmAieeahCAiICsgdi5uYW1lICsgIiDkuLrms6jlhoznlKjmiLfpu5jorqTop5LoibI/IiwKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIG9uT2s6ICgpID0+IHsKICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgIGlkOiB2LmlkLAogICAgICAgICAgICBpc0RlZmF1bHQ6IHRydWUKICAgICAgICAgIH07CiAgICAgICAgICBzZXREZWZhdWx0Um9sZShwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy4kTW9kYWwucmVtb3ZlKCk7CiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CiAgICAgICAgICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNhbmNlbERlZmF1bHQodikgewogICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsKICAgICAgICB0aXRsZTogIuehruiupOWPlua2iCIsCiAgICAgICAgY29udGVudDogIuaCqOehruiupOimgeWPlua2iOaJgOmAieeahCAiICsgdi5uYW1lICsgIiDop5LoibLkuLrpu5jorqQ/IiwKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIG9uT2s6ICgpID0+IHsKICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgIGlkOiB2LmlkLAogICAgICAgICAgICBpc0RlZmF1bHQ6IGZhbHNlCiAgICAgICAgICB9OwogICAgICAgICAgc2V0RGVmYXVsdFJvbGUocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuJE1vZGFsLnJlbW92ZSgpOwogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwogICAgICAgICAgICAgIHRoaXMuZ2V0Um9sZUxpc3QoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBlZGl0UGVybSh2KSB7CiAgICAgIHRoaXMuZWRpdFJvbGVQZXJtSWQgPSB2LmlkOwogICAgICB0aGlzLm1vZGFsVGl0bGUgPSB2Lm5hbWUgKyAiIOiPnOWNleadg+mZkOS/ruaUuSI7CiAgICAgIGxldCByb2xlUGVybXMgPSB2LnBlcm1pc3Npb25zOwogICAgICBpZiAodGhpcy50cmVlTG9hZGluZykgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi6I+c5Y2V5p2D6ZmQ5pWw5o2u5Yqg6L295Lit77yM6K+356iN5ZCO54K55Ye75p+l55yLIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuY2hlY2tQZXJtVHJlZSh0aGlzLnBlcm1EYXRhLCByb2xlUGVybXMpOwogICAgICB0aGlzLnBlcm1Nb2RhbFZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOmAkuW9kuWIpOaWreWtkOiKgueCuQogICAgY2hlY2tQZXJtVHJlZShwZXJtRGF0YSwgcm9sZVBlcm1zKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgcGVybURhdGEuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICAgIGlmICh0aGF0Lmhhc1Blcm0ocCwgcm9sZVBlcm1zKSAmJiBwLnN0YXR1cyAhPSAtMSkgewogICAgICAgICAgcC5jaGVja2VkID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcC5jaGVja2VkID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChwLmNoaWxkcmVuICYmIHAuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhhdC5jaGVja1Blcm1UcmVlKHAuY2hpbGRyZW4sIHJvbGVQZXJtcyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDliKTmlq3op5LoibLmi6XmnInnmoTmnYPpmZDoioLngrnli77pgIkKICAgIGhhc1Blcm0ocCwgcm9sZVBlcm1zKSB7CiAgICAgIGxldCBmbGFnID0gZmFsc2U7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9sZVBlcm1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHAuaWQgPT0gcm9sZVBlcm1zW2ldLnBlcm1pc3Npb25JZCkgewogICAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGZsYWcpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgLy8g6YCS5b2S5YWo6YCJ6IqC54K5CiAgICBzZWxlY3RlZFRyZWVBbGwocGVybURhdGEsIHNlbGVjdCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHBlcm1EYXRhLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBlLmNoZWNrZWQgPSBzZWxlY3Q7CiAgICAgICAgaWYgKGUuY2hpbGRyZW4gJiYgZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGF0LnNlbGVjdGVkVHJlZUFsbChlLmNoaWxkcmVuLCBzZWxlY3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0UGVybUVkaXQoKSB7CiAgICAgIHRoaXMuc3VibWl0UGVybUxvYWRpbmcgPSB0cnVlOwogICAgICBsZXQgcGVybUlkcyA9ICIiOwogICAgICBsZXQgc2VsZWN0ZWROb2RlcyA9IHRoaXMuJHJlZnMudHJlZS5nZXRDaGVja2VkTm9kZXMoKTsKICAgICAgc2VsZWN0ZWROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcGVybUlkcyArPSBlLmlkICsgIiwiOwogICAgICB9KTsKICAgICAgcGVybUlkcyA9IHBlcm1JZHMuc3Vic3RyaW5nKDAsIHBlcm1JZHMubGVuZ3RoIC0gMSk7CiAgICAgIGVkaXRSb2xlUGVybSh7CiAgICAgICAgcm9sZUlkOiB0aGlzLmVkaXRSb2xlUGVybUlkLAogICAgICAgIHBlcm1JZHM6IHBlcm1JZHMKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuc3VibWl0UGVybUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEFkZGVkIiwgZmFsc2UpOwogICAgICAgICAgdXRpbC5pbml0Um91dGVyKHRoaXMpOwogICAgICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpOwogICAgICAgICAgdGhpcy5wZXJtTW9kYWxWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxQZXJtRWRpdCgpIHsKICAgICAgdGhpcy5wZXJtTW9kYWxWaXNpYmxlID0gZmFsc2U7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfQp9Ow=="},{"version":3,"names":["getRoleList","getAllPermissionList","addRole","editRole","deleteRole","setDefaultRole","editRolePerm","util","name","data","loading","treeLoading","submitPermLoading","modalType","roleModalVisible","permModalVisible","modalTitle","roleForm","description","roleFormValidate","required","message","trigger","submitLoading","columns","type","width","align","title","key","minWidth","sortable","sortType","fixed","render","h","params","props","size","ghost","shape","icon","style","marginRight","on","click","editPerm","row","defaultRole","cancelDefault","setDefault","edit","remove","total","permData","editRolePermId","searchForm","pageNumber","pageSize","sort","order","methods","init","getPermList","renderContent","root","node","level","display","cursor","checked","changePage","v","changePageSize","changeSort","e","then","res","success","result","records","deleteDisableNode","that","forEach","status","disabled","children","length","cancelRole","submitRole","$refs","validate","valid","$Message","permissions","addRoleFx","resetFields","id","attr","str","JSON","stringify","roleInfo","parse","$Modal","confirm","content","onOk","ids","isDefault","rolePerms","warning","checkPermTree","p","hasPerm","flag","i","permissionId","selectedTreeAll","select","submitPermEdit","permIds","selectedNodes","tree","getCheckedNodes","substring","roleId","$store","commit","initRouter","cancelPermEdit","mounted"],"sources":["src/views/role/role/index.vue"],"sourcesContent":["<template>\r\n<div class=\"search\">\r\n    <Card>\r\n        <Row :gutter=\"16\">\r\n            <Form ref=\"searchForm\" :model=\"searchForm\" inline :label-width=\"0\">\r\n                <Form-item label=\"\">\r\n                    <Input type=\"text\" v-model=\"searchForm.name\" placeholder=\"角色名称\" clearable style=\"width: 200px\" />\r\n                </Form-item>\r\n                <Form-item label=\"\">\r\n                    <Input type=\"text\" v-model=\"searchForm.description\" placeholder=\"角色描述\" clearable style=\"width: 200px\" />\r\n                </Form-item>\r\n                <Form-item label=\"\">\r\n                    <Button type=\"success\" @click=\"init\" ghost shape=\"circle\" size=\"small\" icon=\"md-refresh\">搜索</Button>\r\n                    <Divider type=\"vertical\" />\r\n                    <Button @click=\"addRoleFx\" type=\"primary\" ghost shape=\"circle\" size=\"small\" icon=\"md-add\">添加角色</Button>\r\n                </Form-item>\r\n            </Form>\r\n        </Row>\r\n        <Divider dashed />\r\n        <Row :gutter=\"16\">\r\n            <Table :loading=\"loading\" border stripe size=\"small\" :columns=\"columns\" :data=\"data\" ref=\"table\" sortable=\"custom\" @on-sort-change=\"changeSort\"></Table>\r\n        </Row>\r\n        <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n            <Page :current=\"searchForm.pageNumber\" :total=\"total\" :page-size=\"searchForm.pageSize\" @on-change=\"changePage\" @on-page-size-change=\"changePageSize\" :page-size-opts=\"[10,20,50]\" size=\"small\" show-total show-elevator show-sizer></Page>\r\n        </Row>\r\n    </Card>\r\n\r\n    <!-- 编辑 -->\r\n    <Modal :title=\"modalTitle\" v-model=\"roleModalVisible\" :mask=\"false\" draggable ok-text=\"保存角色数据\" @on-ok=\"submitRole\" @on-cancel=\"cancelRole\">\r\n        <Form ref=\"roleForm\" :model=\"roleForm\" :label-width=\"80\" :rules=\"roleFormValidate\">\r\n            <Row :gutter=\"16\">\r\n                <Col span=\"24\">\r\n                <FormItem label=\"角色名称\" prop=\"name\">\r\n                    <Input v-model=\"roleForm.name\" placeholder=\"角色的名称,建议以ROLR_开头...\" />\r\n                </FormItem>\r\n                <FormItem label=\"备注\" prop=\"description\">\r\n                    <Input v-model=\"roleForm.description\" />\r\n                </FormItem>\r\n                </Col>\r\n            </Row>\r\n        </Form>\r\n    </Modal>\r\n    <!-- 菜单权限 -->\r\n    <Modal :title=\"modalTitle\" v-model=\"permModalVisible\" :mask=\"false\" draggable ok-text=\"保存菜单权限\" @on-ok=\"submitPermEdit\" @on-cancel=\"cancelPermEdit\">\r\n        <Row :gutter=\"16\">\r\n            <Col span=\"24\" style=\"max-height:500px;overflow-y: scroll;\">\r\n            <Tree ref=\"tree\" :data=\"permData\" show-checkbox :render=\"renderContent\" :check-strictly=\"true\"></Tree>\r\n            <Spin size=\"large\" fix v-if=\"treeLoading\"></Spin>\r\n            </Col>\r\n        </Row>\r\n    </Modal>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    getRoleList,\r\n    getAllPermissionList,\r\n    addRole,\r\n    editRole,\r\n    deleteRole,\r\n    setDefaultRole,\r\n    editRolePerm\r\n} from \"./api.js\";\r\nimport util from \"@/libs/util.js\";\r\nexport default {\r\n    name: \"role\",\r\n    data() {\r\n        return {\r\n            loading: true,\r\n            treeLoading: true,\r\n            submitPermLoading: false,\r\n            modalType: 0,\r\n            roleModalVisible: false,\r\n            permModalVisible: false,\r\n            modalTitle: \"\",\r\n            roleForm: {\r\n                name: \"\",\r\n                description: \"\"\r\n            },\r\n            roleFormValidate: {\r\n                name: [{\r\n                    required: true,\r\n                    message: \"角色名称不能为空\",\r\n                    trigger: \"blur\"\r\n                }]\r\n            },\r\n            submitLoading: false,\r\n            columns: [{\r\n                    type: \"index\",\r\n                    width: 60,\r\n                    align: \"center\"\r\n                },\r\n                {\r\n                    title: \"角色名称\",\r\n                    key: \"name\",\r\n                    minWidth: 150,\r\n                    sortable: true\r\n                },\r\n                {\r\n                    title: \"备注\",\r\n                    key: \"description\",\r\n                    minWidth: 260,\r\n                    sortable: true\r\n                },\r\n                {\r\n                    title: \"创建时间\",\r\n                    key: \"createTime\",\r\n                    minWidth: 170,\r\n                    sortable: true,\r\n                    sortType: \"desc\"\r\n                },\r\n                {\r\n                    title: \"创建人\",\r\n                    key: \"createBy\",\r\n                    minWidth: 170,\r\n                    sortable: true,\r\n                    sortType: \"desc\"\r\n                },\r\n                {\r\n                    title: \"更新时间\",\r\n                    key: \"updateTime\",\r\n                    minWidth: 170,\r\n                    sortable: true\r\n                },\r\n                {\r\n                    title: \"最后更新人\",\r\n                    key: \"updateBy\",\r\n                    minWidth: 170,\r\n                    sortable: true\r\n                },\r\n                {\r\n                    title: \"操作\",\r\n                    key: \"action\",\r\n                    align: \"center\",\r\n                    fixed: \"right\",\r\n                    width: 380,\r\n                    render: (h, params) => {\r\n                        return h(\"div\", [\r\n                            h(\r\n                                \"Button\", {\r\n                                    props: {\r\n                                        type: \"success\",\r\n                                        size: \"small\",\r\n                                        ghost: true,\r\n                                        shape: \"circle\",\r\n                                        icon: \"ios-brush\"\r\n                                    },\r\n                                    style: {\r\n                                        marginRight: \"5px\"\r\n                                    },\r\n                                    on: {\r\n                                        click: () => {\r\n                                            this.editPerm(params.row);\r\n                                        }\r\n                                    }\r\n                                },\r\n                                \"菜单权限\"\r\n                            ),\r\n                            h(\r\n                                \"Button\", {\r\n                                    props: {\r\n                                        type: params.row.defaultRole ? \"primary\" : \"info\",\r\n                                        size: \"small\",\r\n                                        ghost: true,\r\n                                        shape: \"circle\",\r\n                                        icon: \"ios-browsers\"\r\n                                    },\r\n                                    style: {\r\n                                        marginRight: \"5px\"\r\n                                    },\r\n                                    on: {\r\n                                        click: () => {\r\n                                            if (params.row.defaultRole) {\r\n                                                this.cancelDefault(params.row);\r\n                                            } else {\r\n                                                this.setDefault(params.row);\r\n                                            }\r\n\r\n                                        }\r\n                                    }\r\n                                },\r\n                                params.row.defaultRole ? \"取消默认\" : \"设为默认\"\r\n                            ),\r\n                            h(\r\n                                \"Button\", {\r\n                                    props: {\r\n                                        type: \"warning\",\r\n                                        size: \"small\",\r\n                                        ghost: true,\r\n                                        shape: \"circle\",\r\n                                        icon: \"md-color-wand\"\r\n                                    },\r\n                                    style: {\r\n                                        marginRight: \"5px\"\r\n                                    },\r\n                                    on: {\r\n                                        click: () => {\r\n                                            this.edit(params.row);\r\n                                        }\r\n                                    }\r\n                                },\r\n                                \"编辑\"\r\n                            ),\r\n                            h(\r\n                                \"Button\", {\r\n                                    props: {\r\n                                        type: \"error\",\r\n                                        size: \"small\",\r\n                                        ghost: true,\r\n                                        shape: \"circle\",\r\n                                        icon: \"ios-undo\"\r\n                                    },\r\n                                    on: {\r\n                                        click: () => {\r\n                                            this.remove(params.row);\r\n                                        }\r\n                                    }\r\n                                },\r\n                                \"删除\"\r\n                            )\r\n                        ]);\r\n                    }\r\n                }\r\n            ],\r\n            data: [],\r\n            total: 0,\r\n            permData: [],\r\n            editRolePermId: \"\",\r\n            searchForm: { // 搜索框初始化对象\r\n                pageNumber: 1, // 当前页数\r\n                pageSize: 15, // 页面大小\r\n                sort: \"createTime\", // 默认排序字段\r\n                order: \"desc\", // 默认排序方式\r\n            },\r\n        };\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.getRoleList();\r\n            this.getPermList();\r\n        },\r\n        renderContent(h, {\r\n            root,\r\n            node,\r\n            data\r\n        }) {\r\n            let icon = \"\";\r\n            if (data.level == 0) {\r\n                icon = \"ios-navigate\";\r\n            } else if (data.level == 1) {\r\n                icon = \"md-list-box\";\r\n            } else if (data.level == 2) {\r\n                icon = \"md-list\";\r\n            } else if (data.level == 3) {\r\n                icon = \"md-radio-button-on\";\r\n            } else {\r\n                icon = \"md-radio-button-off\";\r\n            }\r\n            return h(\r\n                \"span\", {\r\n                    style: {\r\n                        display: \"inline-block\",\r\n                        cursor: \"pointer\"\r\n                    },\r\n                    on: {\r\n                        click: () => {\r\n                            data.checked = !data.checked;\r\n                        }\r\n                    }\r\n                },\r\n                [\r\n                    h(\"span\", [\r\n                        h(\"Icon\", {\r\n                            props: {\r\n                                type: icon,\r\n                                size: \"16\"\r\n                            },\r\n                            style: {\r\n                                \"margin-right\": \"8px\",\r\n                                \"margin-bottom\": \"3px\"\r\n                            }\r\n                        }),\r\n                        h(\"span\", data.title)\r\n                    ])\r\n                ]\r\n            );\r\n        },\r\n        changePage(v) {\r\n            this.searchForm.pageNumber = v;\r\n            this.getRoleList();\r\n        },\r\n        changePageSize(v) {\r\n            this.searchForm.pageSize = v;\r\n            this.getRoleList();\r\n        },\r\n        changeSort(e) {\r\n            this.searchForm.sort = e.key;\r\n            this.searchForm.order = e.order;\r\n            if (e.order === \"normal\") {\r\n                this.searchForm.order = \"\";\r\n            }\r\n            this.getRoleList();\r\n        },\r\n        getRoleList() {\r\n            this.loading = true;\r\n            getRoleList(this.searchForm).then(res => {\r\n                this.loading = false;\r\n                if (res.success) {\r\n                    this.data = res.result.records;\r\n                    this.total = res.result.total;\r\n                }\r\n            });\r\n        },\r\n        getPermList() {\r\n            this.treeLoading = true;\r\n            getAllPermissionList().then(res => {\r\n                if (res.success) {\r\n                    this.deleteDisableNode(res.result);\r\n                    this.permData = res.result;\r\n                    this.treeLoading = false;\r\n                }\r\n                this.treeLoading = false;\r\n            });\r\n        },\r\n        // 递归标记禁用节点\r\n        deleteDisableNode(permData) {\r\n            let that = this;\r\n            permData.forEach(function (e) {\r\n                if (e.status == -1) {\r\n                    e.title = \"[已禁用] \" + e.title;\r\n                    e.disabled = true;\r\n                }\r\n                if (e.children && e.children.length > 0) {\r\n                    that.deleteDisableNode(e.children);\r\n                }\r\n            });\r\n        },\r\n        cancelRole() {\r\n            this.roleModalVisible = false;\r\n        },\r\n        submitRole() {\r\n            this.$refs.roleForm.validate(valid => {\r\n                if (valid) {\r\n                    if (this.modalType == 0) {\r\n                        // 添加\r\n                        this.submitLoading = true;\r\n                        addRole(this.roleForm).then(res => {\r\n                            this.submitLoading = false;\r\n                            if (res.success) {\r\n                                this.$Message.success(\"操作成功\");\r\n                                this.getRoleList();\r\n                                this.roleModalVisible = false;\r\n                            }\r\n                        });\r\n                    } else {\r\n                        this.submitLoading = true;\r\n                        delete this.roleForm.permissions;\r\n                        editRole(this.roleForm).then(res => {\r\n                            this.submitLoading = false;\r\n                            if (res.success) {\r\n                                this.$Message.success(\"操作成功\");\r\n                                this.getRoleList();\r\n                                this.roleModalVisible = false;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        addRoleFx() {\r\n            this.modalType = 0;\r\n            this.modalTitle = \"添加角色\";\r\n            this.$refs.roleForm.resetFields();\r\n            delete this.roleForm.id;\r\n            this.roleModalVisible = true;\r\n        },\r\n        edit(v) {\r\n            this.modalType = 1;\r\n            this.modalTitle = \"编辑角色\";\r\n            this.$refs.roleForm.resetFields();\r\n            for (let attr in v) {\r\n                if (v[attr] == null) {\r\n                    v[attr] = \"\";\r\n                }\r\n            }\r\n            let str = JSON.stringify(v);\r\n            let roleInfo = JSON.parse(str);\r\n            this.roleForm = roleInfo;\r\n            this.roleModalVisible = true;\r\n        },\r\n        remove(v) {\r\n            this.$Modal.confirm({\r\n                title: \"确认删除\",\r\n                content: \"您确认要删除角色 \" + v.name + \" ?\",\r\n                loading: true,\r\n                onOk: () => {\r\n                    deleteRole({\r\n                        ids: v.id\r\n                    }).then(res => {\r\n                        this.$Modal.remove();\r\n                        if (res.success) {\r\n                            this.$Message.success(\"删除成功\");\r\n                            this.getRoleList();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        setDefault(v) {\r\n            this.$Modal.confirm({\r\n                title: \"确认设置\",\r\n                content: \"您确认要设置所选的 \" + v.name + \" 为注册用户默认角色?\",\r\n                loading: true,\r\n                onOk: () => {\r\n                    let params = {\r\n                        id: v.id,\r\n                        isDefault: true\r\n                    };\r\n                    setDefaultRole(params).then(res => {\r\n                        this.$Modal.remove();\r\n                        if (res.success) {\r\n                            this.$Message.success(\"操作成功\");\r\n                            this.getRoleList();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        cancelDefault(v) {\r\n            this.$Modal.confirm({\r\n                title: \"确认取消\",\r\n                content: \"您确认要取消所选的 \" + v.name + \" 角色为默认?\",\r\n                loading: true,\r\n                onOk: () => {\r\n                    let params = {\r\n                        id: v.id,\r\n                        isDefault: false\r\n                    };\r\n                    setDefaultRole(params).then(res => {\r\n                        this.$Modal.remove();\r\n                        if (res.success) {\r\n                            this.$Message.success(\"操作成功\");\r\n                            this.getRoleList();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        editPerm(v) {\r\n            this.editRolePermId = v.id;\r\n            this.modalTitle = v.name + \" 菜单权限修改\";\r\n            let rolePerms = v.permissions;\r\n            if (this.treeLoading) {\r\n                this.$Message.warning(\"菜单权限数据加载中，请稍后点击查看\");\r\n                return;\r\n            }\r\n            this.checkPermTree(this.permData, rolePerms);\r\n            this.permModalVisible = true;\r\n        },\r\n        // 递归判断子节点\r\n        checkPermTree(permData, rolePerms) {\r\n            let that = this;\r\n            permData.forEach(function (p) {\r\n                if (that.hasPerm(p, rolePerms) && p.status != -1) {\r\n                    p.checked = true;\r\n                } else {\r\n                    p.checked = false;\r\n                }\r\n                if (p.children && p.children.length > 0) {\r\n                    that.checkPermTree(p.children, rolePerms);\r\n                }\r\n            });\r\n        },\r\n        // 判断角色拥有的权限节点勾选\r\n        hasPerm(p, rolePerms) {\r\n            let flag = false;\r\n            for (let i = 0; i < rolePerms.length; i++) {\r\n                if (p.id == rolePerms[i].permissionId) {\r\n                    flag = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (flag) {\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        // 递归全选节点\r\n        selectedTreeAll(permData, select) {\r\n            let that = this;\r\n            permData.forEach(function (e) {\r\n                e.checked = select;\r\n                if (e.children && e.children.length > 0) {\r\n                    that.selectedTreeAll(e.children, select);\r\n                }\r\n            });\r\n        },\r\n        submitPermEdit() {\r\n            this.submitPermLoading = true;\r\n            let permIds = \"\";\r\n            let selectedNodes = this.$refs.tree.getCheckedNodes();\r\n            selectedNodes.forEach(function (e) {\r\n                permIds += e.id + \",\";\r\n            });\r\n            permIds = permIds.substring(0, permIds.length - 1);\r\n            editRolePerm({\r\n                roleId: this.editRolePermId,\r\n                permIds: permIds\r\n            }).then(res => {\r\n                this.submitPermLoading = false;\r\n                if (res.success) {\r\n                    this.$Message.success(\"操作成功\");\r\n                    this.$store.commit(\"setAdded\", false);\r\n                    util.initRouter(this);\r\n                    this.getRoleList();\r\n                    this.permModalVisible = false;\r\n                }\r\n            });\r\n        },\r\n        cancelPermEdit() {\r\n            this.permModalVisible = false;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"../../../styles/table-common.less\";\r\n\r\n.permModal {\r\n    .ivu-modal-body {\r\n        max-height: 560px;\r\n        overflow: auto;\r\n    }\r\n}\r\n\r\n.depModal {\r\n    .ivu-modal-body {\r\n        max-height: 500px;\r\n        overflow: auto;\r\n    }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}