{"remainingRequest":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\graduateSys\\registration\\front\\src\\views\\template\\file-upload.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\graduateSys\\registration\\front\\src\\views\\template\\file-upload.vue","mtime":1743403543362},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1739857230815},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739857231742},{"path":"D:\\graduateSys\\registration\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1739857212415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVwbG9hZEZpbGUgfSBmcm9tICJAL2FwaS9pbmRleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZmlsZVVwbG9hZCIsCiAgcHJvcHM6IHsKICAgIHZhbHVlOiBPYmplY3QsCiAgICBzaXplOiBTdHJpbmcsCiAgICB0eXBlOiBTdHJpbmcsCiAgICBnaG9zdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc2hhcGU6IFN0cmluZywKICAgIGljb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiaW9zLWNsb3VkLXVwbG9hZC1vdXRsaW5lIgogICAgfSwKICAgIHRleHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAi5LiK5Lyg5paH5Lu2IgogICAgfSwKICAgIG1heFNpemU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA1CiAgICB9LAogICAgYWNjZXB0OiBTdHJpbmcKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmb3JtYXQoKSB7CiAgICAgIGlmICh0aGlzLmFjY2VwdCkgewogICAgICAgIGxldCBmb3JtYXQgPSBbXTsKICAgICAgICB0aGlzLmFjY2VwdC5zcGxpdCgiLCIpLmZvckVhY2goZSA9PiB7CiAgICAgICAgICBmb3JtYXQucHVzaChlLnJlcGxhY2UoIi4iLCAiIikucmVwbGFjZSgiICIsICIiKSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZvcm1hdDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY2Nlc3NUb2tlbjoge30sCiAgICAgIHRpdGxlOiAi54K55Ye75LiL6L29IiwKICAgICAgY3VycmVudFZhbHVlOiB0aGlzLnZhbHVlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdXBsb2FkRmlsZVVybDogdXBsb2FkRmlsZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSB7CiAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuZ2V0U3RvcmUoImFjY2Vzc1Rva2VuIikKICAgICAgfTsKICAgIH0sCiAgICBkb3dubG9hZCgpIHsKICAgICAgaWYgKCF0aGlzLmN1cnJlbnRWYWx1ZS51cmwpIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCLml6DmlYjnmoTpk77mjqUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgd2luZG93Lm9wZW4odGhpcy5jdXJyZW50VmFsdWUudXJsICsgIj9hdHRuYW1lPSZyZXNwb25zZS1jb250ZW50LXR5cGU9YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJmZpbGVuYW1lPSIgKyB0aGlzLmN1cnJlbnRWYWx1ZS5uYW1lKTsKICAgIH0sCiAgICBoYW5kbGVGb3JtYXRFcnJvcihmaWxlKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLiROb3RpY2Uud2FybmluZyh7CiAgICAgICAgdGl0bGU6ICLkuI3mlK/mjIHnmoTmlofku7bmoLzlvI8iLAogICAgICAgIGRlc2M6ICLmiYDpgInmlofku7bigJggIiArIGZpbGUubmFtZSArICIg4oCZ5qC85byP5LiN5q2j56GuLCDor7fpgInmi6kgIiArIHRoaXMuYWNjZXB0ICsgIiDmoLzlvI/mlofku7YiCiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZU1heFNpemUoZmlsZSkgewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy4kTm90aWNlLndhcm5pbmcoewogICAgICAgIHRpdGxlOiAi5paH5Lu25aSn5bCP6L+H5aSnIiwKICAgICAgICBkZXNjOiAi5omA6YCJ5paH5Lu24oCYICIgKyBmaWxlLm5hbWUgKyAiIOKAmeWkp+Wwj+i/h+Wkpywg5LiN5b6X6LaF6L+HICIgKyB0aGlzLm1heFNpemUgKyAiTS4iCiAgICAgIH0pOwogICAgfSwKICAgIGJlZm9yZVVwbG9hZCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgaGFuZGxlU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gewogICAgICAgICAgdXJsOiByZXMucmVzdWx0LAogICAgICAgICAgbmFtZTogZmlsZS5uYW1lLAogICAgICAgICAgc2l6ZTogZmlsZS5zaXplCiAgICAgICAgfTsKICAgICAgICB0aGlzLnRpdGxlID0gIueCueWHu+S4i+i9vSgiICsgKGZpbGUuc2l6ZSAqIDEuMCAvICgxMDI0ICogMTAyNCkpLnRvRml4ZWQoMikgKyAiIE1CKSI7CiAgICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCB0aGlzLmN1cnJlbnRWYWx1ZSk7CiAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5jdXJyZW50VmFsdWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRXJyb3IoZXJyb3IsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVycm9yLnRvU3RyaW5nKCkpOwogICAgfSwKICAgIGhhbmRsZUNoYW5nZSh2KSB7CiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5jdXJyZW50VmFsdWUpOwogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmN1cnJlbnRWYWx1ZSk7CiAgICB9LAogICAgc2V0Q3VycmVudFZhbHVlKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5jdXJyZW50VmFsdWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2YWx1ZTsKICAgICAgaWYgKHRoaXMuY3VycmVudFZhbHVlLnNpemUpIHsKICAgICAgICB0aGlzLnRpdGxlID0gIueCueWHu+S4i+i9vSgiICsgKHRoaXMuY3VycmVudFZhbHVlLnNpemUgKiAxLjAgLyAoMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpICsgIiBNQikiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGl0bGUgPSAi54K55Ye75LiL6L29IjsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmN1cnJlbnRWYWx1ZSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWUodmFsKSB7CiAgICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHZhbCk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfQp9Ow=="},{"version":3,"names":["uploadFile","name","props","value","Object","size","String","type","ghost","Boolean","default","disabled","shape","icon","text","maxSize","Number","accept","computed","format","split","forEach","e","push","replace","data","accessToken","title","currentValue","loading","uploadFileUrl","methods","init","getStore","download","url","$Message","error","window","open","handleFormatError","file","$Notice","warning","desc","handleMaxSize","beforeUpload","handleSuccess","res","success","result","toFixed","$emit","message","handleError","fileList","toString","handleChange","v","setCurrentValue","watch","val","mounted"],"sources":["src/views/template/file-upload.vue"],"sourcesContent":["<template>\r\n<div>\r\n    <div class=\"file-upload-wrap\">\r\n        <Upload :action=\"uploadFileUrl\" :headers=\"accessToken\" :on-success=\"handleSuccess\" :on-error=\"handleError\" :format=\"format\" :accept=\"accept\" :max-size=\"maxSize*1024\" :on-format-error=\"handleFormatError\" :on-exceeded-size=\"handleMaxSize\" :before-upload=\"beforeUpload\" :show-upload-list=\"false\" class=\"file-upload\">\r\n            <Button :loading=\"loading\" :type=\"type\" :ghost=\"ghost\" :shape=\"shape\" :size=\"size\" :disabled=\"disabled\" :icon=\"icon\">{{text}}</Button>\r\n        </Upload>\r\n        <Tooltip transfer :content=\"title\" placement=\"top\">\r\n            <a @click=\"download\">{{currentValue.name}}</a>\r\n        </Tooltip>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n    uploadFile\r\n} from \"@/api/index\";\r\nexport default {\r\n    name: \"fileUpload\",\r\n    props: {\r\n        value: Object,\r\n        size: String,\r\n        type: String,\r\n        ghost: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        disabled: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        shape: String,\r\n        icon: {\r\n            type: String,\r\n            default: \"ios-cloud-upload-outline\"\r\n        },\r\n        text: {\r\n            type: String,\r\n            default: \"上传文件\"\r\n        },\r\n        maxSize: {\r\n            type: Number,\r\n            default: 5\r\n        },\r\n        accept: String\r\n    },\r\n    computed: {\r\n        format() {\r\n            if (this.accept) {\r\n                let format = [];\r\n                this.accept.split(\",\").forEach(e => {\r\n                    format.push(e.replace(\".\", \"\").replace(\" \", \"\"));\r\n                });\r\n                return format;\r\n            } else {\r\n                return [];\r\n            }\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            accessToken: {},\r\n            title: \"点击下载\",\r\n            currentValue: this.value,\r\n            loading: false,\r\n            uploadFileUrl: uploadFile\r\n        };\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.accessToken = {\r\n                accessToken: this.getStore(\"accessToken\")\r\n            };\r\n        },\r\n        download() {\r\n            if (!this.currentValue.url) {\r\n                this.$Message.error(\"无效的链接\");\r\n                return;\r\n            }\r\n            window.open(\r\n                this.currentValue.url +\r\n                \"?attname=&response-content-type=application/octet-stream&filename=\" +\r\n                this.currentValue.name\r\n            );\r\n        },\r\n        handleFormatError(file) {\r\n            this.loading = false;\r\n            this.$Notice.warning({\r\n                title: \"不支持的文件格式\",\r\n                desc: \"所选文件‘ \" +\r\n                    file.name +\r\n                    \" ’格式不正确, 请选择 \" +\r\n                    this.accept +\r\n                    \" 格式文件\"\r\n            });\r\n        },\r\n        handleMaxSize(file) {\r\n            this.loading = false;\r\n            this.$Notice.warning({\r\n                title: \"文件大小过大\",\r\n                desc: \"所选文件‘ \" +\r\n                    file.name +\r\n                    \" ’大小过大, 不得超过 \" +\r\n                    this.maxSize +\r\n                    \"M.\"\r\n            });\r\n        },\r\n        beforeUpload() {\r\n            this.loading = true;\r\n            return true;\r\n        },\r\n        handleSuccess(res, file) {\r\n            this.loading = false;\r\n            if (res.success) {\r\n                this.currentValue = {\r\n                    url: res.result,\r\n                    name: file.name,\r\n                    size: file.size\r\n                };\r\n                this.title =\r\n                    \"点击下载(\" +\r\n                    ((file.size * 1.0) / (1024 * 1024)).toFixed(2) +\r\n                    \" MB)\";\r\n                this.$emit(\"input\", this.currentValue);\r\n                this.$emit(\"on-change\", this.currentValue);\r\n            } else {\r\n                this.$Message.error(res.message);\r\n            }\r\n        },\r\n        handleError(error, file, fileList) {\r\n            this.loading = false;\r\n            this.$Message.error(error.toString());\r\n        },\r\n        handleChange(v) {\r\n            this.$emit(\"input\", this.currentValue);\r\n            this.$emit(\"on-change\", this.currentValue);\r\n        },\r\n        setCurrentValue(value) {\r\n            if (value === this.currentValue) {\r\n                return;\r\n            }\r\n            this.currentValue = value;\r\n            if (this.currentValue.size) {\r\n                this.title =\r\n                    \"点击下载(\" +\r\n                    ((this.currentValue.size * 1.0) / (1024 * 1024)).toFixed(2) +\r\n                    \" MB)\";\r\n            } else {\r\n                this.title = \"点击下载\";\r\n            }\r\n            this.$emit(\"on-change\", this.currentValue);\r\n        }\r\n    },\r\n    watch: {\r\n        value(val) {\r\n            this.setCurrentValue(val);\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.file-upload-wrap {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .file-upload {\r\n        display: inline-block;\r\n        margin-right: 10px;\r\n    }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}